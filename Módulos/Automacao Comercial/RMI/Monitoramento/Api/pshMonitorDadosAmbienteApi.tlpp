#INCLUDE "TOTVS.CH"
#INCLUDE "tlpp-core.th"
#INCLUDE "tlpp-rest.th"

/*/{Protheus.doc} getDadosAmbiente
    API para consulta dos dados de ambiente pelo monitor de integração
    @type  Function
    @author Bruno Almeida
    @since 09/10/2024
    @version P12
    @param
    @return Nil
/*/
@get('/api/retail/v1/monitoramento/dadosambiente')
Function getDadosAmbiente()

Local oDadosAmbiente    := pshMonitorDadosAmbienteObj():New()
Local cDados            := ""

cDados := oDadosAmbiente:DadosAmbiente()

oRest:setKeyHeaderResponse('Content-Type','application/json; charset=utf-8')
oRest:setResponse( cDados )

FwFreeObj(oDadosAmbiente)
oDadosAmbiente := Nil

Return Nil

/*/{Protheus.doc} getDadosDicionario
    API para retornar os detalhes das tabelas de dicionario SIX, SX2, SX3 e SX6
    @type  Function
    @author Bruno Almeida
    @since 09/10/2024
    @version P12
    @param
    @return Nil
/*/
@get('/api/retail/v1/monitoramento/dadosdicionario')
Function getDadosDicionario()

Local oDadosAmbiente    := pshMonitorDadosAmbienteObj():New()
Local cDados            := ""

cDados := oDadosAmbiente:DadosDicionario()

oRest:setKeyHeaderResponse('Content-Type','application/json; charset=UTF-8')
oRest:setResponse( EncodeUtf8(cDados) )

FwFreeObj(oDadosAmbiente)
oDadosAmbiente := Nil

Return Nil
