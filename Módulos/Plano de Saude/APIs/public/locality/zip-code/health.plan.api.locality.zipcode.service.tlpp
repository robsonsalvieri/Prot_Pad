#include "tlpp-core.th"

#define STATUS_CODE_OK 200

namespace totvs.protheus.health.plan.api.locality

using namespace totvs.protheus.health.plans.api.util

/*/{Protheus.doc} ZipCodeService
Serviços das APIs dos códigos postais (CEP) dentro do contexto do PLS.
@type class
@version 12.1.2510 
@author vinicius.queiros
@since 31/01/2025
/*/
class ZipCodeService from BaseService

	public method new() constructor
	public method getZipCodes() as logical
	public method destroy()

endclass

/*/{Protheus.doc} new
Método construtor da classe ZipCodeService.
@type method
@version 12.1.2510  
@author vinicius.queiros
@since 03/02/2025 
@return object, instância da classe ZipCodeService
*/
method new() class ZipCodeService

	_Super:new()

return self

/*/{Protheus.doc} getZipCodes
Método responsável por obter os códigos postais com base nos parâmetros de consulta.
@type method
@version 12.1.2510  
@author vinicius.queiros
@since 03/02/2025 
@return logical, indica se a operação foi bem-sucedida
*/
method getZipCodes() as logical class ZipCodeService

	local lSuccess := .F. as logical
	local oAdapter as object

	oAdapter := ZipCodeAdapter():new()
	oAdapter:setQueryParams(self:jParams)

	if oAdapter:getZipCodes()
		self:nCodeStatus := STATUS_CODE_OK
		self:jResult := oAdapter:getJsonResult()

		lSuccess := .T.
	endIf

	oAdapter:destroy()
	freeObj(oAdapter)

return lSuccess

/*/{Protheus.doc} destroy
Método responsável por liberar os recursos utilizados pela classe ZipCodeService.
@type method
@version 12.1.2510
@author vinicius.queiros
@since 31/01/2025
/*/
method destroy() class ZipCodeService

	_Super:destroy()

return
