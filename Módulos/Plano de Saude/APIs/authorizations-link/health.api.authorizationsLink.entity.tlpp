#include "TOTVS.CH"

#define CRLF chr( 13 ) + chr( 10 )

/*/{Protheus.doc} 
    Classe concreta da Entidade HealthApiAuthorizationsLinkEntity - Other RemunerationAPI
@type  Class
    @author FrameworkApi 1.0
    @since 20190211
/*/
Class HealthApiAuthorizationsLinkEntity from CenEntity

    public Method New()

    public Method serialize(oJsonControl)
    public Method getDescription()
    public Method destroy()
    
EndClass

Method New() Class HealthApiAuthorizationsLinkEntity
	_Super:New()
Return self

Method serialize(oJsonControl) Class HealthApiAuthorizationsLinkEntity

	local oJson     := JsonObject():New()
	local oRda      := JsonObject():New()
	default oJsonControl := CenJsonControl():New()

    oRda['healthProviderId']    := self:getValue("healthProviderId")
    oRda['name']                := self:getValue("healthProviderName")

    oJsonControl:setProp(oJson,"idOnHealthInsurer", ifPls(self:getValue("idOnHealthInsurer"),self:getValue("paymentGuide")))
    oJsonControl:setProp(oJson,"healthProvider",  oRda)
    oJsonControl:setProp(oJson,"authorizationDescription",self:getDescription(self:getValue("eventType")))
    oJsonControl:setProp(oJson,"authorizationDate", FWDateTo8601(stod(self:getValue("authorizationDate"))))
    oJsonControl:setProp(oJson,"requestDate", FWDateTo8601(stod(self:getValue("authorizationDate"))))

return oJson
//------------------------------------------------------------------------------------------
/*/{Protheus.doc} destroy

@type  Class
@author Lucas Nonato
@since 01/03/2020
/*/
//------------------------------------------------------------------------------------------
Method destroy() Class HealthApiAuthorizationsLinkEntity 
	_Super:destroy()
	DelClassIntF()
Return

Method getDescription(cTipGui) Class HealthApiAuthorizationsLinkEntity 
    local cRet := ''
    if cTipGui == '01'
        cRet := 'Consulta'
    elseif cTipGui == '02'
        cRet := 'Exame'
    elseif cTipGui == '03'
        cRet := 'Solicitação de Internação'
    elseif cTipGui == '05'
        cRet := 'Resumo de Internação'
    elseif cTipGui == '06'
        cRet := 'Honorarios'
    elseif cTipGui == '07'
        cRet := 'Quimioterapia'
    elseif cTipGui == '08'
        cRet := 'Radioterapia'
    elseif cTipGui == '09'
        cRet := 'Anexo de OPME'
    elseif cTipGui == '10'
        cRet := 'Recurso de Glosa'
    elseif cTipGui == '11'
        cRet := 'Prorrogação de Internação'
    elseif cTipGui == '13'
        cRet := 'Odontologia'
    endif
Return cRet 