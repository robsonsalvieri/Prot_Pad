#INCLUDE 'protheus.ch'
#INCLUDE 'restful.ch'

//-------------------------------------------------------------------
/*/{Protheus.doc} PlsBatchCoverReq
    classe para validacao de Tokens de Atendimento

@author  Daniel Silva
@version P12
@since   04/06/19
/*/
//------------------------------------------------------------------- 
class PlsBatchCoverReq from CenRequest 

    public Data oRest
 
    public method New()
    public method Process()

endClass

method New(oRest) class PlsBatchCoverReq

    self:oRest := oRest
  
return self

method Process() class PlsBatchCoverReq

    Local oBatchCoverSvc := nil
   
    oBatchCoverSvc := PlsBatchCoverSvc():New(self:oRest)

    if oBatchCoverSvc:Process()
        self:lSuccess  := .T.
        self:cResponse := oBatchCoverSvc:getResult()
        self:nStatus   := oBatchCoverSvc:getStatusCode()
    else
        oErrorAux         := oBatchCoverSvc:getError()
        self:lSuccess     := .F.
        self:nFault       := oErrorAux['status']
        self:nStatus      := oErrorAux['status']
        self:cFaultDesc   := oErrorAux['message']
        self:cFaultDetail := oErrorAux['detailedMessage']
    endIf

return .T.
