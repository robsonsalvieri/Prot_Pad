#INCLUDE "PLSMODEL.CH"
#INCLUDE 'TOTVS.CH'
#INCLUDE 'FWMVCDEF.CH'
//
// Define
//
#DEFINE PLS__ALIAS 	 "B68"
#DEFINE PLS_MODELO 	 "PLSDEMAM"
#DEFINE PLS_MD__ID 	 "DETAIL"
#DEFINE PLS_TITULO 	 STR0001 //"Dados"
#DEFINE PLS_MENUDEF	 "VIEWDEF.PLSDEMAM"
#DEFINE PLS_VW_TELA	 STR0002 //"TELA"
#DEFINE PLS_VW__ID	 "VIEW"
#DEFINE PLS_VW_OPE  2
#DEFINE PLS_MD_OPE 	 1
//
// Static
//
STATIC oPADC := PLSPADRC():New(PLS__ALIAS) 
//-------------------------------------------------------------------
/*/{Protheus.doc} PLSDEMAM
Classe modelo de dados da rotina de demanda (Auditoria)

@author Alexander Santos
@since 16/02/2011
@version P11
/*/
//-------------------------------------------------------------------
Class PLSDEMAM From PLSCONTR          

METHOD New() Constructor
EndClass     
//-------------------------------------------------------------------
/*/{Protheus.doc} New
Construtor da Class

@author Alexander Santos
@since 16/02/2011
@version P11
/*/
//-------------------------------------------------------------------
METHOD New() Class PLSDEMAM
Return Self
/*/


Ŀ
Funcao     MenuDef  Autor  Totvs                   Data  16.02.11 
Ĵ
Descricao  MenuDef													  
ٱ


/*/
Static Function MenuDef()
LOCAL o790C		:= PLS790GEC()
PRIVATE aRotina := {}      
//
// Opcoes de menu															 
//
If !o790C:lVisible
	AaDd( aRotina, { STR0003, 	PLS_MENUDEF, 0, MODEL_OPERATION_VIEW } ) //"Visualizar"
	AaDd( aRotina, { STR0006, 	PLS_MENUDEF, 0, MODEL_OPERATION_INSERT} ) //"Incluir"
	AaDd( aRotina, { STR0007, 	PLS_MENUDEF, 0, MODEL_OPERATION_UPDATE} ) //"Alterar"
	AaDd( aRotina, { STR0008, 	PLS_MENUDEF, 0, MODEL_OPERATION_DELETE} ) //"Excluir"
	//Ŀ
	// Aoes relacionadas														 
	//
	AaDd( aRotina, { STR0009, "PLS790BAN('"+PLS__ALIAS+"',.T.)", 0 , 0} ) //"Banc. Processo"
Else
	AaDd( aRotina, { STR0003, 	PLS_MENUDEF, 0, MODEL_OPERATION_VIEW } ) //"Visualizar"
EndIf	
//Ŀ
// Fim da rotina															 
//
Return aRotina                              
/*/


Ŀ
Funcao     ViewDef  Autor  Totvs                   Data  16.02.11 
Ĵ
Descricao  ViewDef													  
ٱ


/*/               
Static Function ViewDef()             
LOCAL oModel := FWLoadModel( PLS_MODELO )
LOCAL oStruV := FWFormStruct( PLS_VW_OPE, PLS__ALIAS )
LOCAL oView	 := FWFormView():New()
//
// Seta o modelo na visao													 
//
oView:SetModel( oModel )
//
// Adiciona a strutura de campos da tabela na view							 
//
oView:AddField( PLS_VW__ID, oStruV, PLS_MD__ID )
//
// Tela																	 
//
oView:CreateHorizontalBox( PLS_VW_TELA , 100 )
oView:SetOwnerView( PLS_VW__ID, PLS_VW_TELA )
//
// Remover campos da View 																	 
//
oStruV:RemoveField('B68_ALIMOV')
oStruv:RemoveField('B68_RECMOV')
oStruV:RemoveField('B68_OPERAD')
oStruv:RemoveField('B68_NOMOPE')
//
// Fecha a tela
//
oView:SetCloseOnOk( {|oView| oPADC:VWOkCloseScreenVLD(oView,.F.) } )
//
// Botoes
//
//
// Validacao da view
//
oView:SetVldActivate( {|oView| oPADC:VWInitVLD(oView) } )
//
// Fim da rotina															 
//
Return oView                     
/*/


Ŀ
Funcao     ModelDef Autor  Totvs                   Data  16.02.11 
Ĵ
Descricao  ModelDef													  
ٱ


/*/
Static Function ModelDef()
LOCAL oStruM := FWFormStruct( PLS_MD_OPE, PLS__ALIAS )
LOCAL oModel := MPFormModel():New( PLS_MODELO,/*bPreValidacao*/,{ |oModel| oPADC:MDPosVLD(oModel,PLS__ALIAS) },{|oModel| oPADC:MDCommit(oModel,PLS__ALIAS) }, {|| oPADC:MDCancelVLD() } ) /*bPosValidacao*/ /*bCommit*/ /*bCancel*/
//Ŀ
// Defini a descricao da tela												 
//
oModel:SetDescription( PLS_TITULO )
//Ŀ
// Adiciona a strutura de campos ao modelo									 
//
oModel:AddFields( PLS_MD__ID,,oStruM )
//
// Chave primria da tabela B69								 
//
oModel:SetPrimarykey({"B68_FILIAL","B68_ALIMOV","B68_RECMOV","B68_NUMPRC","B68_TPPROC"})
//Ŀ
// Valida o modelo															 
//
oModel:SetVldActivate( { |oModel| oPADC:MDActVLD(oModel) } )
//Ŀ
// Fim da Rotina															 
//
Return oModel
/*/


Ŀ
Funcao    PLSDEMAM   Autor  Totvs				     Data  30/03/10 
Ĵ
Descricao  Somente para compilar a class							  
ٱ


/*/
Function PLSDEMAM
Return