#include 'totvs.ch'

/*/{Protheus.doc} OFSoContactService
	Classe principal de controle do PRIM
	
	@type class
	@author Vinicius Gati
	@since 08/09/2022
/*/
Class OFSoContactService
	Public Method New() CONSTRUCTOR
	Public Method Process()
EndClass

/*/{Protheus.doc} New
	Construtor Simples

	@type method
	@author Vinicius Gati
	@since 08/09/2022
/*/
Method New() Class OFSoContactService
Return SELF

/*/{Protheus.doc} Process
	Metodo que processa as requisicoes vindas do Service Operations

	@type method
	@author Vinicius Gati
	@since 30/06/2021
/*/
Method Process(aQueryParams as Array, cBody as Character, cGatewayHeader as Character) Class OFSoContactService
	local jGatewayHeader := JsonObject():New()
	local cParseHead := jGatewayHeader:fromJson(cGatewayHeader)
	Local oSoRequest := OFSoRequestBody():New(cBody)
	local oInteractor := OFSoContactUpdatedInFieldServiceInteractor():New()

	if ! empty(cParseHead)
		return OFSoInvalidGatewayHeaderResponse():New()
	endif

	if ! oSoRequest:IsValid()
		return OFSoInvalidBodyResponse():New()
	endif

	if oSoRequest:GetName() == "ContactUpdatedInFieldService"
		return oInteractor:Process(oSoRequest, jGatewayHeader)
	endif
Return OFSoInvalidBodyResponse():New()
