#include 'tlpp-core.th'
#include 'tlpp-rest.th'

Namespace TotvsDevelopers.Demo.Controllers

Using Namespace TotvsDevelopers.Demo.Services

//-------------------------------------------------------------------
/*/{Protheus.doc} NgTokenMntIA
Classe referente ao Token protheus

@type   Class

@author Eduardo Mussi
@since  30/07/2024

/*/
//-------------------------------------------------------------------
Class NgTokenMntIA From NgBaseController

    Private Data oService

    Public Method New() Constructor

    @Get("/api/v1/getTokenMntIA")
    Public Method Get()

EndClass

Method New() Class NgTokenMntIA
    _Super:New()
Return

//-------------------------------------------------------------------
/*/{Protheus.doc} Get
Método responsável por capturar informações do protheus e retornar ao
front

@type   Method

@author Eduardo Mussi
@since  30/07/2024

@return Nil
/*/
//-------------------------------------------------------------------
Method Get() Class NgTokenMntIA

    Local cJson    := ''
    Local cToken   := SuperGetMv( 'MV_NGMNTIA', , '' )
    Local cVerChat := '0.0.1'

    If !Empty( cToken )

        cJson := '{ "token": "' + cToken + '", "backendVersion": "' + cVerChat + '", "protheusVersion": "' + GetRPORelease() + '", "user":"' + RetCodUsr() + '"}'

    EndIf

    oRest:SetResponse( cJson )

Return
