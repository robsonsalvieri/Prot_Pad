<%
#DEFINE nTamTab "410"
#DEFINE nTamBrw "385"               

LOCAL oHtml 	:= WCHtml():New() 
LOCAL nI 		:= 1
LOCAL aHeader 	:= '[{name:"Descrição"},{name:"Status"},{name:"Fim da Carência"}]'
LOCAL aCols 	:= ''   
LOCAL nQtdReg 	:= Len( HttpSession->aCarenBenefi )
LOCAL NomeBenef := If(nQtdReg > 0, HttpSession->aCarenBenefi[1]:cNomeBenef,"" ) //22-10

aCols := '['
For nI := 1 To nQtdReg
	aCols += 	'{0:{field:"Descricao",value:"'  + ALLTRIM(HttpSession->aCarenBenefi[nI]:cDesClasse) + '"},' +;
			  	'1:{field:"Status",value:"'    + ALLTRIM(HttpSession->aCarenBenefi[nI]:cStatus) + '"},' +;
			  	'2:{field:"DataFinCar",value:"' + DTOC(HttpSession->aCarenBenefi[nI]:dDataFimCar) + '"},' +'},'
Next nI
aCols := Left(aCols,Len(aCols)-1) + IIf(Len(aCols)>1,']','[]')
%>

<%=oHtml:getDType()%>

<%                                        
////////////////////////////////////////////////////////////////////////////////////////////
//³ Formulario.
////////////////////////////////////////////////////////////////////////////////////////////
oForm := WCForm():New("Form1")  
oForm:setWidth(nTamTab)
oForm:setTitle("Consulta de Carência")                     

////////////////////////////////////////////////////////////////////////////////////////////
//³ Tabela principal
////////////////////////////////////////////////////////////////////////////////////////////
oTabela := WCTable():New()

////////////////////////////////////////////////////////////////////////////////////////////
//³ Linha do Browse
////////////////////////////////////////////////////////////////////////////////////////////
oLiBrw := WCLine():New()

////////////////////////////////////////////////////////////////////////////////////////////
//³ Propridade do grupo fieldset
////////////////////////////////////////////////////////////////////////////////////////////
oFSBrw := WCFieldSet():New(NomeBenef,CValToChar(Val(nTamTab)-20),"10","10") //22-10

////////////////////////////////////////////////////////////////////////////////////////////
//³ Browse
////////////////////////////////////////////////////////////////////////////////////////////
oBrwFat := WCComponent():New("BW","BrwGrid")
oBrwFat:setBrWidth(nTamBrw)
oFSBrw:setAddCFS(oBrwFat)

oLiBrw:setAddComp(oFSBrw)

oTabela:setAddLine(oLiBrw)

////////////////////////////////////////////////////////////////////////////////////////////
//³ Tabelas do form
////////////////////////////////////////////////////////////////////////////////////////////
oForm:setAddTables(oTabela)

////////////////////////////////////////////////////////////////////////////////////////////
//³ Form no HTML
////////////////////////////////////////////////////////////////////////////////////////////
oHtml:setObj(oForm)
%>

<%=oHtml:loadWC()%> 

<script language="JavaScript">
<!--

	var oHist = new gridData('BrwGrid',380,150);
	
	oHist.load({cConteiner:'BrwGrid',
				cWidth:380,
				cHeight:150,
				nPagina:0,
				nRegPagina:0,
				nQtdReg:<%=nQtdReg%>,
				nQtdPag:0,
				lOverflow:true,
				lShowLineNumber:false,
				lChkBox:false,
				aBtnFunc:"",
				aHeader: <%=aHeader%>,
				aCols: <%=aCols%> });
//-->
</script>
