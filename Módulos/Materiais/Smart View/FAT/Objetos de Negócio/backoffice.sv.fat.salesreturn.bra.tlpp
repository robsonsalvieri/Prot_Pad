#INCLUDE "PROTHEUS.CH"
#INCLUDE "FWLIBVERSION.CH"
#include "totvs.ch"
#include "msobject.ch"
#include "totvs.framework.treports.integratedprovider.th"
#include "tlpp-rest.th"
#include "tlpp-core.th"

namespace totvs.protheus.backoffice.sv.fat.salesreturn.treportsintegratedprovider

@totvsFrameworkTReportsIntegratedProvider(active=.F., team="SIGAFAT", tables="SF1,SD1,SA1,SB1", name="Devoluções de Vendas", country="BRA")

//-------------------------------------------------------------------
/*/{Protheus.doc} salesreturnSmartViewBusinessObjectBRA
Classe para criação do Objeto de Negócio para Devoluções de Vendas localização Brasil.

@author FAT/CRM
@since 18/07/2023
@version 1.0
*/
//-------------------------------------------------------------------  
class salesreturnSmartViewBusinessObjectBRA from totvs.protheus.backoffice.sv.fat.salesreturn.treportsintegratedprovider.salesreturnSmartViewBusinessObject

    public method new() as object
    public method preData() as object
    public method processData() as object
    public method preSchema() as object

    protected data aFields as array
    protected data aStruct as array

endclass

//-------------------------------------------------------------------
/*{Protheus.doc} new
Método de instância da classe

@return object: self

@author FAT/CRM
@since 18/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method new() class salesreturnSmartViewBusinessObjectBRA 

    _Super:new()

return self

//-------------------------------------------------------------------
/*{Protheus.doc} preData
Método chamado antes do getData do objeto principal

@return object: self:oData

@author FAT/CRM
@since 18/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preData() as object class salesreturnSmartViewBusinessObjectBRA 

    //Aqui é adicionada uma condição no where que será utilizado na query do objeto padrão

Return self:oData

//-------------------------------------------------------------------
/*{Protheus.doc} processData
Deverá ser chamado no momento do processamento da query

@return object: self:oData

@author FAT/CRM
@since 18/07/2023
@version 1.0
*/
//-------------------------------------------------------------------    
method processData(nOperLoc as numeric) as object class salesreturnSmartViewBusinessObjectBRA

    Local cAliasQry := Self:cAliasTmpLoc as character

     Do Case
        //---------------------------------------------------
        //Operação 1:
        //Utilizado somente para commit dos 
        //campos antes do appendData - Case (nOperLoc == 1)
        //---------------------------------------------------

        //---------------------------------------------------
        //Operação 2:
        //realiza tratamento dos valores dos itens com
        //cáculos localizados
        //---------------------------------------------------
        Case (nOperLoc == 2)

            self:nPercIpiLoc    := (cAliasQry)->D1_IPI
            self:nValIpiLoc     := (cAliasQry)->D1_VALIPI

    EndCase

return

//-------------------------------------------------------------------
/*{Protheus.doc} preSchema
Método chamada antes do getSchema do objeto principal

@return object: self:oSchema

@author FAT/CRM
@since 18/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preSchema() as object class salesreturnSmartViewBusinessObjectBRA

    //Adição de novos campos personalizados (não existem na tabela)

return self:oSchema
