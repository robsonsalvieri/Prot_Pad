#INCLUDE "PROTHEUS.CH"
#INCLUDE "FWLIBVERSION.CH"
#include "totvs.ch"
#include "msobject.ch"
#include "totvs.framework.treports.integratedprovider.th"
#include "tlpp-rest.th"
#include "tlpp-core.th"

namespace totvs.protheus.backoffice.sv.fat.salesordervscustomer.treportsintegratedprovider

@totvsFrameworkTReportsIntegratedProvider(active=.F., team="SIGAFAT", tables="SA1,SC5,SC6,SF4", name="Pedidos de Venda x Clientes", country="BRA")

//-----------------------------------------------------------------------------------
/*/{Protheus.doc} salesordervscustomerSmartViewBusinessObjectBRA
Classe para criação do Objeto de Negócio para Relacao de Pedidos de Vendas Brasil.

@author FAT/CRM
@since 17/07/2023
@version 1.0
*/
//-----------------------------------------------------------------------------------  
class salesordervscustomerSmartViewBusinessObjectBRA from totvs.protheus.backoffice.sv.fat.salesordervscustomer.treportsintegratedprovider.salesordervscustomerSmartViewBusinessObject
    
    public method new() as object
    public method preData() as object
    public method processData() as object
    public method preSchema() as object

endclass
 
//-------------------------------------------------------------------
/*{Protheus.doc} new
Método de instância da classe
 
@return object: self
 
@author FAT/CRM
@since 17/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method new() class salesordervscustomerSmartViewBusinessObjectBRA 
	
    _Super:new()

return self

//-------------------------------------------------------------------
/*{Protheus.doc} preData
Método chamado antes do getData do objeto principal
 
@return object: self:oData
 
@author FAT/CRM
@since 17/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preData() as object class salesordervscustomerSmartViewBusinessObjectBRA
Return self:oData

//-------------------------------------------------------------------
/*{Protheus.doc} processData
Deverá ser chamado no momento do processamento da query
 
@return object: self:oData
 
@author FAT/CRM
@since 17/07/2023
@version 1.0
*/
//-------------------------------------------------------------------    
method processData(nOperLoc as numeric, lBind as logical) as object class salesordervscustomerSmartViewBusinessObjectBRA

    Default nOperLoc := 0
    Default nOperLoc := .F.
    
    //--------------------------------------------------------------
    //  Operação 1 será utilizado somente para commit dos
    //  campos antes do appendData - Case (nOperLoc == 1)
    //--------------------------------------------------------------
    If nOperLoc == 1

    //--------------------------------------------------------------
    //  Operação 2 - Complementar o Filtro do Subselect do
    //  Where da Query ja com tratativa de Bind
    //--------------------------------------------------------------
    ElseIf nOperLoc == 2

        If lBind
            self:oQuery:SetString(self:nParam++, "N")
        Else
            self:cQuery += " AND SF4.F4_AGREG <> ? "
        EndIf
    EndIf
        
return

//-------------------------------------------------------------------
/*{Protheus.doc} preSchema
Método chamada antes do getSchema do objeto principal
 
@return object: self:oSchema
 
@author FAT/CRM
@since 17/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preSchema() as object class salesordervscustomerSmartViewBusinessObjectBRA

    //Adição de novos campos personalizados (não existem na tabela)

return self:oSchema
