#include "msobject.ch"
#include "protheus.ch"
#include "backoffice.sv.com.openquotes.ch"
#include "totvs.framework.treports.integratedprovider.th"

namespace totvs.protheus.backoffice.com.smartView.integratedProvider

@totvsFrameworkTReportsIntegratedProvider(active=.F., team="SIGACOM", tables="SC8,SA2", name="Listagem de Cotações em Aberto - Localizado", country="BRA")

//-----------------------------------------------------------------------------------------------------------------------------------
/*{Protheus.doc} openquotesSmartViewBusinessObjectBRA
Classe para criação do Objeto de Negócio de Cotações em Aberto
 
@author Leandro Nishihata
@since 15/05/2023
@version 1.0
*/
//-----------------------------------------------------------------------------------------------------------------------------------  
class openquotesSmartViewBusinessObjectBRA from totvs.protheus.backoffice.com.smartView.integratedProvider.openquotesSmartViewBusinessObject

	public method new() as object

	protected method preSchema()	as object
	protected method preData()		as object
	protected method processData()	as object

	private data aFldSC8 as array

endclass

//-----------------------------------------------------------------------------------------------------------------------------------
/*{Protheus.doc} new
Método de instância da classe
 
@return object: self
 
@author Leandro Nishihata
@since 15/05/2023
@version 1.0
*/
//-------------------------------------------------------------------  
method new() class openquotesSmartViewBusinessObjectBRA

	_Super:new()
	
	::aFldSC8 := {"C8_VALIPI", "C8_ALIIPI"}
  
return self
    
//-------------------------------------------------------------------
/*{Protheus.doc} preSchema
Retorna a estrutura dos campos
 
@return object: self:oSchema
 
@author Leandro Nishihata
@since 15/05/2023
@version 1.0
*/
//-------------------------------------------------------------------  
method preSchema() as object class openquotesSmartViewBusinessObjectBRA

	self:aliasToSchema("SC8", ::aFldSC8)
	
return self:oSchema

//-----------------------------------------------------------------------------------------------------------------------------------
/*/{Protheus.doc} preData
Retorna a estrutura dos campos
 
@return object: self:oSchema
 
@author Leandro Nishihata
@since 05/09/2023
@version 1.0
*/
//-----------------------------------------------------------------------------------------------------------------------------------   
method preData() as object class openquotesSmartViewBusinessObjectBRA

local nx	as numeric

	For nx:= 1 to Len(::aFldSC8)
		::cSelectComplement += ", " + ::aFldSC8[nx]
	Next

return self:oData

//-----------------------------------------------------------------------------------------------------------------------------------
/*/{Protheus.doc} processData
Retorna a estrutura dos campos
 
@return object: self:oSchema
 
@author Leandro Nishihata
@since 05/09/2023
@version 1.0
*/
//-----------------------------------------------------------------------------------------------------------------------------------
method processData() as object class openquotesSmartViewBusinessObjectBRA

local nX	as numeric

	for nX := 1 to len(::aFldSC8)
		self:jData[::aFldSC8[nX]] := (self:cAlias)->&(::aFldSC8[nX])
	next nX
	
return self:oData
