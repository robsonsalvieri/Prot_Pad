#include "totvs.ch"
#include "msobject.ch"
#include "tlpp-rest.th"
#include "tlpp-core.th"
#include "totvs.framework.treports.integratedprovider.th"
#include "backoffice.sv.fin.listofissuedchecks.ch"

namespace totvs.protheus.backoffice.fin.smartView.integratedProvider

@totvsFrameworkTReportsIntegratedProvider(active=.T., team="SIGAFIN", tables="SEF,SA6", customTables="SEF,SA6", name="Relação de cheques devolvidos", country="ALL")

/*/{Protheus.doc} ListOfCancelledChecksSmartViewBusinessObject
    @author guilherme.sordi@totvs.com.br
    @since 01/09/2023
    @version 12.1.2210
*/
class ListOfCancelledChecksSmartViewBusinessObject from totvs.protheus.backoffice.fin.smartView.integratedProvider.ListOfIssuedChecksSmartViewBusinessObject
    public method new() as object
    protected method getWhereSEF() as character
    protected method setBindSEF()
    protected method initializeBusinessObject()
endclass

/*/{Protheus.doc} new
    @author guilherme.sordi@totvs.com.br
    @since 01/09/2023
    @version 12.1.2210
*/
method new() class ListOfCancelledChecksSmartViewBusinessObject
    _Super:new()
return self

/*/{Protheus.doc} initializeBusinessObject
    @author guilherme.sordi@totvs.com.br
    @since 11/01/2023
    @version 12.1.2210
*/
method initializeBusinessObject() class ListOfCancelledChecksSmartViewBusinessObject    
    self:setDisplayName(STR0006)  //Relação de cheques cancelados 
    self:setDescription(STR0006)  //Relação de cheques cancelados    
    self:setPergunte("FINT013")
return

/*/{Protheus.doc} getWhereSEF
    @author guilherme.sordi@totvs.com.br
    @since 01/09/2023
    @version 12.1.2210
*/
method getWhereSEF() as character class ListOfCancelledChecksSmartViewBusinessObject
return " AND (( EF_CART IN ( ? ) AND EF_IMPRESS = ? ) OR ( EF_CART = ? AND EF_ALINEA1 <> ? )) "

/*/{Protheus.doc} setBindSEF
    @author fabioh.andrade@totvs.com.br
    @since 04/09/2024
    @version 12.1.2210
*/
method setBindSEF() class ListOfCancelledChecksSmartViewBusinessObject
    self:oStatement:SetIn( self:nParam++, {' ','P'} )
    self:oStatement:SetString( self:nParam++, 'C' )
    self:oStatement:SetString( self:nParam++, 'R' )
    self:oStatement:SetString( self:nParam++, ' ' )
return 
