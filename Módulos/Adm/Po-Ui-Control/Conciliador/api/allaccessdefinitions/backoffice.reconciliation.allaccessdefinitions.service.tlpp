#include "tlpp-core.th"

namespace totvs.protheus.backoffice.reconciliation.allaccessdefinitions

/*/{Protheus.doc} AllAccessDefinitionsSettingService
    Classe de serviço, realizada instância e chamada de métodos de serviços
    @author Totvs
    @since 04/04/2022
    @version 12.1.33
/*/
Class AllAccessDefinitionsSettingService
    public method new()
    public method getInstance()
    public method getAllAccessDefinitions() 
EndClass

/*/{Protheus.doc} new
    Metodo construtor
    @author Totvs
    @since 04/04/2022
    @version 12.1.33
/*/
Method new() class AllAccessDefinitionsSettingService
Return 

/*/{Protheus.doc} getInstance
    Responsável por instanciar a classe controller
    @author Totvs
    @since 04/04/2022
    @version version
    @param param_name, param_type, param_descr
    @return return_var, return_type, return_description
    /*/
Method getInstance() class AllAccessDefinitionsSettingService
    static __instance As Object

    If ValType(__instance) == "U"
        __instance := AllAccessDefinitionsSettingService():new()
    EndIf
    
Return __instance

//-------------------------------------------------------------------
/*/{Protheus.doc} getAllAccountingCalendar
Responsável por chamar a consulta e parsear o retorno no formato JSON

@author Totvs
/*/
//-------------------------------------------------------------------
method getAllAccessDefinitions(nPage as Numeric, nPageSize as Numeric) class AllAccessDefinitionsSettingService
    Local oService := AllAccessDefinitionsProtheusData():getData() As Object
    Local jResponse := JsonObject():new() As Json

    oService:getAll(nPage, nPageSize)

    IIf(oService:lOk,; 
            jResponse := oService:getJSONResponse(),; 
            jResponse := SetRestFault(oService:GetCode(), oService:getMessage()))
    
    oService:DeActivate()
    FreeObj(oService)
return jResponse
