#include "tlpp-core.th"

namespace totvs.protheus.backoffice.reconciliation.getAccessControl

//-------------------------------------------------------------------
/*/{Protheus.doc} GetAccessControlService
Classe de serviço, realizada instância e chamada de métodos de serviços

@author Totvs
/*/
//-------------------------------------------------------------------
class GetAccessControlService
    public method new()
    public method getInstance()
    public method getAllGetAllGrps()
    public method getAllGetAllUsers()
endclass

//-------------------------------------------------------------------
/*/{Protheus.doc} GetAccessControlService
Metodo construtor

@author Totvs
/*/
//-------------------------------------------------------------------
method new() class GetAccessControlService
return

//-------------------------------------------------------------------
/*/{Protheus.doc} GetAccessControlService
Responsável por instanciar a classe controller

@author Totvs
/*/
//-------------------------------------------------------------------
method getInstance() class GetAccessControlService
    static __instance As Object
    
    If ValType(__instance) == "U"
        __instance := GetAccessControlService():new()
    EndIf
return

//-------------------------------------------------------------------
/*/{Protheus.doc} getAllGetAccessControl
Responsável por chamar a consulta e parsear o retorno no formato JSON

@author Totvs
/*/
//-------------------------------------------------------------------
method getAllGetAllGrps(aFilters as array) class GetAccessControlService
    Local oSettings := GetAccessControlProtheusData():getData() As Object
    Local jResponse := JsonObject():new() As Json
    Local aResponse :={}

    aResponse := oSettings:getAllGrps(aFilters)
    jResponse["items"]:= aResponse

    
    oSettings:DeActivate()
    FreeObj(oSettings)
return jResponse

//-------------------------------------------------------------------
/*/{Protheus.doc} getAllGetAccessControl
Responsável por chamar a consulta e parsear o retorno no formato JSON

@author Totvs
/*/
//-------------------------------------------------------------------
method getAllGetAllUsers(cCodGrupo as Character, aFilters as array) class GetAccessControlService
    Local oSettings := GetAccessControlProtheusData():getData() As Object
    Local jResponse := JsonObject():new() As Json
    Local aResponse :={}

    aResponse := oSettings:getAllUsers(cCodGrupo,aFilters)
    jResponse["items"]:= aResponse

    
    oSettings:DeActivate()
    FreeObj(oSettings)
return jResponse
