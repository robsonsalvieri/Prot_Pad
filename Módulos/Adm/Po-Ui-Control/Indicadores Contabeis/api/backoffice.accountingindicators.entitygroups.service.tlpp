#include "tlpp-core.th"

namespace totvs.protheus.backoffice.accountingindicators.entitygroups

//-------------------------------------------------------------------
/*/{Protheus.doc} EntityGroupsService
Classe de serviço, realizada instância e chamada de métodos de serviços

@author Totvs
/*/
//-------------------------------------------------------------------
class EntityGroupsService
    Data jResponse  as Json
    public method new()
    public method getInstance()
    public method getEntityGroupsService()
    public method postSaveEntityGroups()
endclass

//-------------------------------------------------------------------
/*/
    {Protheus.doc} EntityGroupsService
    Metodo construtor
/*/
//-------------------------------------------------------------------
method new() class EntityGroupsService
    ::jResponse := JsonObject():New()
return

//-------------------------------------------------------------------
/*/
    {Protheus.doc} EntityGroupsService
    Responsável por instanciar a classe controller
/*/
//-------------------------------------------------------------------
method getInstance() class EntityGroupsService
    static __instance As Object

    If ValType(__instance) == "U"
        __instance := EntityGroupsService():new()
    EndIf
return

//-------------------------------------------------------------------
/*/{Protheus.doc} getEntityGroupsService
    Responsável por chamar a consulta e parsear o retorno no formato JSON
/*/
//-------------------------------------------------------------------
method getEntityGroupsService(cSearch as Character, cCodPla as Character, cConTag as Character, cOrdem as Character, nPage as Numeric, nPageSize as Numeric) class EntityGroupsService
    Local oSettings := EntityGroupsProtheusData():getData() As Object
    Local jResponse := JsonObject():new() As Json

    oSettings:getAll(cSearch, cCodPla, cConTag, cOrdem, nPage, nPageSize)

    IIf(oSettings:lOk,;
            jResponse := oSettings:getJSONResponse(),;
            jResponse := SetRestFault(oSettings:GetCode(), oSettings:getMessage()))

    oSettings:DeActivate()
    FreeObj(oSettings)
return jResponse

//-------------------------------------------------------------------
/*/{Protheus.doc} postSaveEntityGroups
    Responsável por chamar a consulta e parsear o retorno no formato JSON
    
    @autor Totvs
/*/
//-------------------------------------------------------------------
Method postSaveEntityGroups(jBody as Json, nOpcAuto as Numeric) class EntityGroupsService
    Local oService := EntityGroupsProtheusData():getData()        
Return oService:postSaveEntityGroups(jBody, nOpcAuto)



