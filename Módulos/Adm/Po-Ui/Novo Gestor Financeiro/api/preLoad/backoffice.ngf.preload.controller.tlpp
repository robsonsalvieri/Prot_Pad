#Include 'tlpp-core.th'
#Include 'tlpp-rest.th'


Namespace backoffice.ngf.preload
Using Namespace gfin.util

//-------------------------------------------------------------------
/*/{Protheus.doc} getVersion
EndPoint para obter as versões dos fontes

@body
	{
		"portal.cliente.bills": Numeric - Versão do bills,
		"portal.cliente.customer": Numeric - Versão do customer,
		"portal.cliente.invoices": Numeric - Versão do invoices,
		"portal.cliente.home": Numeric - Versão do home,
	}

@return Nil

@author luiz.nai
@since 29/03/2022
/*/
//-------------------------------------------------------------------
@Get('/api/ngf/v1/preload')
Function getPreload()
	Local jResponse As Json

	jResponse := NGFPreload()
	AnswerRest( jResponse )
Return


//-------------------------------------------------------------------
/*/{Protheus.doc} preload/menu/
EndPoint retornar o menu da aplicacao

@return json, Array<pomenuitem>
@author renato.ito
@since 23/04/2024
/*/
//-------------------------------------------------------------------
@Get('/api/ngf/v1/preload/menu/:app')
Function appMenu()
	Local jResponse := JsonObject():New()                    as Json
	Local cApp      := lower(oRest:getPathParamsRequest()[ 'app' ]) as Character

	jResponse['result']   := .t.
	jResponse['response'] := JsonObject():new()

	if cApp == 'fina710'
		jResponse['response']['features'] := backoffice.ngf.preload.menuFINA710()
	elseif cApp == 'fina716'
		jResponse['response']['features'] := backoffice.ngf.preload.menuFINA716()
	endIf
	gfin.util.answerRest( jResponse )
Return
