#INCLUDE 'Totvs.ch'
#include "tlpp-core.th"
#include "distribution.convergencia.rest.error.wms.ch"

/*/{Protheus.doc} WMSSaasRestError
    Classe para tratamento de erros REST
    @author Filipe Mendes
    @since 18/04/2024
    @version version
    /*/
Class WMSSaasRestError
    Public Data description as character
    Public Data status as integer
    Public Data detailedMessage as Array
    Public Method new() as object
    Public Method setDescription(cDescription as character) as character
    Public Method getDescription() as character
    Public Method setStatus(nStatus as integer) as integer
    Public Method getStatus() as integer
    Public Method setDetailedMessage(aDetailedMessage as array) as array
    Public Method getDetailedMessage() as array
    Public Method getDetailedMessageUnique() as character
EndClass

Method new() Class WMSSaasRestError
    self:description     := ""
    self:status          := 0
    self:detailedMessage := {}
Return self

Method setDescription(cDescription) Class WMSSaasRestError
    self:description := cDescription
Return self:description

Method getDescription() Class WMSSaasRestError
Return Iif(!Empty(self:description), self:description + self:getDetailedMessageUnique(), "Internal Server Error")

Method setStatus(nStatus) Class WMSSaasRestError
    self:status := nStatus 
Return self:status

Method getStatus() Class WMSSaasRestError
Return Iif(!Empty(self:status), self:status, 500)

Method setDetailedMessage(aDetailedMessage) Class WMSSaasRestError
    self:detailedMessage := aDetailedMessage
Return self:detailedMessage

Method getDetailedMessage() Class WMSSaasRestError
Return self:detailedMessage

Method getDetailedMessageUnique() Class WMSSaasRestError
    Local cMessage := ""

    If !Empty(self:detailedMessage)
        cMessage := " - " + STR0001 //"Mensagem detalhada: "
        aEval(self:detailedMessage, {|mensagem| cMessage += mensagem +CRLF})
    EndIf
Return cMessage
