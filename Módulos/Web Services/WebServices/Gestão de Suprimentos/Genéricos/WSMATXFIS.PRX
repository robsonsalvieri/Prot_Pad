#INCLUDE "WSMATXFIS.ch"
#INCLUDE "APWEBSRV.CH"
#INCLUDE "PROTHEUS.CH"
/*/


Ŀ
Funo    WSMATXFIS  Autor Eduardo Riera           Data 06.01.2004  
Ĵ
Descrio  Web Service responsavel pelos impostos do sistema            
                                                                        
Ĵ
Sintaxe                                                                 
Ĵ
Parametros                                                              
Ĵ
Uso                                                                     
Ĵ
 Atualizacoes sofridas desde a Construcao Inicial.                       
Ĵ
 Programador   Data    BOPS   Motivo da Alteracao                     
Ĵ
                                                                      
ٱ


/*/
//Ŀ
//Definicao do Web Service de Controle do Usuario                         
//
WSSERVICE MtTaxes                  DESCRIPTION STR0001 NAMESPACE "http://webservices.microsiga.com.br/mttaxes.apw" //"Servio de consulta a tabela de impostos"
   WSDATA Header                   As Array Of BrwHeader
   WSDATA Taxes                    As Array Of GenericStruct
   
   WSMETHOD GetHeader              DESCRIPTION STR0002 //"Mtodo que descreve as estruturas de retorno do servio"
   WSMETHOD BrwTaxes               DESCRIPTION STR0003 //"Mtodo de listagem dos impostos tratados pelo sistema"
ENDWSSERVICE

/*/

Ŀ
Funo    GetHeader Autor   Eduardo Riera          Data 06.01.2004 
Ĵ
          Rotina de recuperacao do header                              
                                                                       
Ĵ
ParametrosExpC1: Tipo de Header                                        
Ĵ
Retorno   ExpL1: Indica que o metodo foi avaliado com sucesso          
                                                                       
Ĵ
Descrio Este metodo devolve o header de uma estrutura                
                                                                       
                                                                       
Ĵ
Uso        Portais                                                     
ٱ


/*/
WSMETHOD GetHeader WSRECEIVE NULLPARAM WSSEND Header WSSERVICE MtTaxes

::Header := MtHeader("GENERICSTRUCT")

Return(.T.)


/*/

Ŀ
Funo    BrwTaxes  Autor   Eduardo Riera          Data 06.01.2004 
Ĵ
          Rotina de recuperacao do header                              
                                                                       
Ĵ
ParametrosExpC1: Tipo de Header                                        
Ĵ
Retorno   ExpL1: Indica que o metodo foi avaliado com sucesso          
                                                                       
Ĵ
Descrio Este metodo devolve o header de uma estrutura                
                                                                       
                                                                       
Ĵ
Uso        Portais                                                     
ٱ


/*/
WSMETHOD BrwTaxes WSRECEIVE NULLPARAM WSSEND Taxes WSSERVICE MtTaxes

Local aImpostos := MaFisLdImp()
Local nX        := 0

::Taxes := {}
For nX := 1 To Len(aImpostos)
	aadd(::Taxes,WSClassNew("GenericStruct"))
	::Taxes[nX]:Code        := aImpostos[nX]
	::Taxes[nX]:Description := STR0004+aImpostos[nX] //"Imposto: "
Next nX
Return(.T.)

Function wsmatxfis()
Return