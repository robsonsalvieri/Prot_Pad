<?xml version="1.0" encoding="UTF-8"?>
<LayOutCTB version="4.6">
	<description>
		<name>SPED FCONT - Escrituracao Contabil Digital</name>
		<destination>A todas as empresas usuarias de sistema de escrituracao  contabil digital' </destination>
		<object>Permitir que as empresas intimadas apresentem dados relativos aos seus negocios e/ou atividades economicas. </object>
		<delivery>As informacoes serao apresentadas pelas pessoas juridicas quando solicitadas pelo fisco ou orgao regulador de setor</delivery>
		<layoutsystem>Sped Fcont</layoutsystem>
		<comment>Para maiores informacoes consulte: http://www.receita.fazenda.gov.br/Sped</comment>
	</description>
	<layout version="4.0">
	<initiating>
		<instruction>_SetOwnerPrvt("aTotal",.T.)</instruction>
		<instruction>aTotal:=Array(21)</instruction>
		<instruction>aTotal[21]:=.F.</instruction>
		<instruction>aTotal[20]:=1</instruction>
		<instruction>aTotal[19]:=1</instruction>
		<instruction>aTotal[18]:=1</instruction>
		<instruction>aTotal[17]:=1</instruction>
		<instruction>aTotal[16]:=0</instruction>
		<instruction>aTotal[15]:={}</instruction>
		<instruction>aTotal[14]:=1</instruction>
		<instruction>aTotal[11]:=1</instruction>
	</initiating>
	<registers>                                                                                                                     
		<register id='0000' description='Identificacao da Entidade'>
			<initiating>
				<instruction>dbSelectArea("CS0")</instruction>
				<instruction>CS0->(dbSetOrder(1))</instruction>
				<instruction>CS0->(dbSeek(xFilial("CS0") + oParam:_REVISAO:TEXT + oParam:_EMPRESA:TEXT + oParam:_FILIAL:TEXT ) )</instruction>
				<instruction>dbSelectArea("CS1")</instruction>
				<instruction>CS1->(dbSetOrder(1))</instruction>
				<instruction>CS1->(dbSeek(xFilial("CS1") + oParam:_REVISAO:TEXT ))</instruction>
				<instruction>dbSelectArea("CS2")</instruction>
				<instruction>CS2->(dbSetOrder(1))</instruction>
				<instruction>CS2->(dbSeek(xFilial("CS2") + oParam:_REVISAO:TEXT + oParam:_EMPRESA:TEXT + oParam:_FILIAL:TEXT ))</instruction>
			</initiating>	
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'             type='C' size='004' dec='0' instruction='"0000"'></field>
					<field name='ID_ARQ'          type='C' size='004' dec='0' instruction='"LALU"'></field>
				 	<field name='DT_INI'          type='D' size='008' dec='0' instruction='CS0->CS0_DTINI'></field>
				 	<field name='DT_FIM'          type='D' size='008' dec='0' instruction='CS0->CS0_DTFIM'></field>
					<field name='NOME'            type='C' size='000' dec='0' instruction='CS2->CS2_NOMEEM'></field>
					<field name='CNPJ'            type='C' size='014' dec='0' instruction='CS2->CS2_CNPJ'></field>
					<field name='UF'              type='C' size='002' dec='0' instruction='CS2->CS2_UF'></field>
					<field name='IE'              type='C' size='000' dec='0' instruction='CS2->CS2_IE'></field>
					<field name='COD_MUN'         type='C' size='007' dec='0' instruction='CS2->CS2_CODMUN'></field>
					<field name='IM'              type='C' size='000' dec='0' instruction='CS2->CS2_IM'></field>
					<field name='IND_SIT_ESP'     type='C' size='001' dec='0' instruction='IIF( ALLTRIM(CS2->CS2_SITESP) == "Z","  ", CS2->CS2_SITESP )'></field>
					<field name="IND_SIT_INI_PER" type="N" size="003" dec="0" instruction="CS0->CS0_SITPER">
					</field>
				</fields>
				<count>
				<instruction>aTotal[20]++</instruction>
				<instruction>Eval({||cReg := "0000",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='I001' description='Abertura do bloco I'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"I001"'></field>
					<field name='IND_DATA'   type='N' size='001' dec='0' instruction='0'></field>
				</fields>
				<count>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I001",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='I050' description='Plano de Contas'>
			<superior>I001</superior>
			<table>TMPCS3</table>
			<initiating>
				<instruction>dbSelectArea("CS3")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCS3",1," SELECT * FROM " + RetSQLTab("CS3") + " WHERE CS3_CODREV = '" + CS0->CS0_CODREV + "' AND " + RetSQLCond("CS3" ) )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I050"'></field>
					<field name='DT_ALT'       type='D' size='008' dec='0' instruction='StoD(TMPCS3->CS3_DTALT)'></field>
					<field name='COD_NAT'      type='C' size='002' dec='0' instruction='TMPCS3->CS3_CODNAT'></field>
					<field name='IND_CTA'      type='C' size='001' dec='0' instruction='TMPCS3->CS3_INDCTA'></field>
					<field name='NIVEL'        type='N' size='000' dec='0' instruction='TMPCS3->CS3_NIVEL'></field>
					<field name='COD_CTA'      type='C' size='000' dec='0' instruction='TMPCS3->CS3_CONTA'></field>
					<field name='COD_CTA_SUP'  type='C' size='000' dec='0' instruction='TMPCS3->CS3_CTASUP'></field>
					<field name='CTA'          type='C' size='000' dec='0' instruction='TMPCS3->CS3_NOMECT'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I050",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCS3",2)]]></instruction>
			</finishing>
		</register>
		<register id='I051' description='Plano de Contas Referencial'>
			<superior>I050</superior>
			<table>TMPCS4</table>
			<initiating>
				<instruction>dbSelectArea("CS4")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCS4",1," SELECT * FROM " + RetSQLTab("CS4") + " WHERE CS4_CODREV = '" + CS0->CS0_CODREV + "' AND CS4_CONTA = '"+TMPCS3->CS3_CONTA+"' AND " + RetSQLCond("CS4"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I051"'></field>
					<field name='COD_ENT_REF'  type='C' size='002' dec='0' instruction='TMPCS4->CS4_ENTREF'></field>
					<field name='COD_CCUS'     type='C' size='000' dec='0' instruction='TMPCS4->CS4_CCUSTO'></field>
					<field name='COD_CTA_REF'  type='C' size='000' dec='0' instruction='TMPCS4->CS4_CTAREF'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I051",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCS4",2)]]></instruction>
			</finishing>
		</register>
		<register id='I075' description='Tabela de historico padronizado'>
			<superior>I001</superior>
			<table>TMPCS7</table>
			<initiating>
				<instruction>dbSelectArea("CS7")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCS7" ,1, " SELECT * FROM " + RetSQLTab("CS7") + " WHERE CS7_CODREV = '" + CS0->CS0_CODREV + "' AND " + RetSQLCond("CS7"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I075"'></field>
					<field name='COD_HIST'     type='C' size='000' dec='0' instruction='TMPCS7->CS7_CODHIS'></field>
					<field name='DESCR_HIST'   type='C' size='000' dec='0' instruction='TMPCS7->CS7_DESCRI'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I075",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCS7",2)]]></instruction>
			</finishing>
		</register>
		<register id='I100' description='Centro de Custos'>
			<superior>I001</superior>
			<table>TMPCS5</table>
			<initiating>
				<instruction>dbSelectArea("CS5")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCS5" ,1," SELECT * FROM " + RetSQLTab("CS5") + " WHERE CS5_CODREV = '" + CS0->CS0_CODREV + "' AND " + RetSQLCond("CS5"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I100"'></field>
					<field name='DT_ALT'       type='D' size='008' dec='0' instruction='STOD(TMPCS5->CS5_DTALT)'></field>
					<field name='COD_CCUS'     type='C' size='000' dec='0' instruction='TMPCS5->CS5_CUSTO'></field>
					<field name='CCUSTO'       type='C' size='000' dec='0' instruction='TMPCS5->CS5_NOME'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I100",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCS5",2)]]></instruction>
			</finishing>
		</register>
		<register id='I150' description='Saldos periodicos - identificacao do periodo'>
			<superior>I001</superior>
			<table>AGLCSC</table>
			<initiating>
				<instruction>dbSelectArea("CSC")</instruction>
				<instruction><![CDATA[ECDQuery("AGLCSC",1," SELECT CSC_DTINI,CSC_DTFIM  FROM " + RetSQLTab("CSC") + " WHERE CSC_CODREV = '" + CS0->CS0_CODREV + "' AND " + RetSQLCond("CSC") + " GROUP BY CSC_DTINI,CSC_DTFIM  ORDER BY CSC_DTINI,CSC_DTFIM "  )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I150"'           ></field>
					<field name='DT_INI'       type='D' size='008' dec='0' instruction='STOD(AGLCSC->CSC_DTINI)'></field>
					<field name='DT_FIN'       type='D' size='008' dec='0' instruction='STOD(AGLCSC->CSC_DTFIM)'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I150",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("AGLCSC",2)]]></instruction>
			</finishing>
		</register>
		<register id='I155' description='Saldos periodicos - Dados do Periodo'>
			<superior>I150</superior>
			<table>TMPCSC</table>
			<initiating>
				<instruction>dbSelectArea("CSC")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCSC",1, " SELECT * FROM " + RetSQLTab("CSC") + " WHERE CSC_CODREV = '" + CS0->CS0_CODREV + "' AND CSC_DTINI >= '"+AGLCSC->CSC_DTINI+"' AND CSC_DTFIM <= '"+AGLCSC->CSC_DTFIM+"' AND CSC_CONTA IN ( SELECT DISTINCT CS3_CONTA FROM " + RetSQLTab("CS3") +" WHERE CS3_CODREV = '"+CS0->CS0_CODREV+"' AND CS3_CODNAT IN ('01','02', '03') AND "+ RetSQLCond("CS3") + " ) AND " + RetSQLCond("CSC") )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I155"'             ></field>
					<field name='COD_CTA'      type='C' size='000' dec='0' instruction='TMPCSC->CSC_CONTA' ></field>
					<field name='COD_CCUSTO'   type='C' size='000' dec='0' instruction='TMPCSC->CSC_CCUSTO' ></field>
					<field name='VL_SLD_INI'   type='N' size='000' dec='2' instruction='TMPCSC->CSC_VALINI'></field>
					<field name='IND_DC_INI'   type='C' size='001' dec='0' instruction='TMPCSC->CSC_INDINI'   ></field>
					<field name='VL_DEB'       type='N' size='000' dec='2' instruction='TMPCSC->CSC_VALDEB'   ></field>
					<field name='VL_CRED'      type='N' size='000' dec='2' instruction='TMPCSC->CSC_VALCRED'  ></field>
					<field name='VL_SLD_FIM'   type='N' size='000' dec='2' instruction='TMPCSC->CSC_VALFIN'></field>
					<field name='IND_DC_FIN'   type='C' size='001' dec='0' instruction='TMPCSC->CSC_INDFIM'   ></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I155",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSC",2)]]></instruction>
			</finishing>
		</register>
		<register id='I156' description='Mapeamento Referencial dos Totais de Débitos e Créditos'>
			<superior>I155</superior>
			<table>TMPCSK</table>
			<initiating>
				<instruction>dbSelectArea("CSK")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCSK",1, " SELECT * FROM " + RetSQLTab("CSK") + " WHERE CSK_CODREV = '" + CS0->CS0_CODREV + "' AND CSK_DTINI >= '"+AGLCSC->CSC_DTINI+"' AND CSK_DTFIM <= '"+AGLCSC->CSC_DTFIM+"'  AND CSK_CONTA = '"+TMPCSC->CSC_CONTA+"' AND CSK_CCUSTO = '"+TMPCSC->CSC_CCUSTO+"' AND " + RetSQLCond("CSK") )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I156"'             ></field>
					<field name='COD_CTA_REF'  type='C' size='000' dec='0' instruction='TMPCSK->CSK_CTAREF' ></field>
					<field name='VL_DEB'       type='N' size='000' dec='2' instruction='TMPCSK->CSK_VALDEB'   ></field>
					<field name='VL_CRED'      type='N' size='000' dec='2' instruction='TMPCSK->CSK_VALCRED'  ></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I156",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSK",2)]]></instruction>
			</finishing>
		</register>
		<register id='I200' description='Lancamento contabil'>
			<superior>I001</superior>
			<table>TMPCSA</table>
			<initiating>
				<instruction>dbSelectArea("CSA")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCSA",1," SELECT *  FROM " + RetSQLTab("CSA") + " WHERE CSA_CODREV = '" + CS0->CS0_CODREV + "' AND CSA_INDTIP NOT IN ('N','E') AND " + RetSQLCond("CSA"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I200"'             ></field>
					<field name='NUM_LCTO'     type='C' size='000' dec='0' instruction='TMPCSA->CSA_NUMLOT'></field>
					<field name='DT_LCTO'      type='D' size='008' dec='0' instruction='STOD(TMPCSA->CSA_DTLANC)'></field>
					<field name='VL_LCTO'      type='N' size='000' dec='2' instruction='TMPCSA->CSA_VLLCTO'></field>
					<field name='IND_LCTO'     type='C' size='000' dec='0' instruction='TMPCSA->CSA_INDTIP'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I200",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSA",2)]]></instruction>
			</finishing>
		</register>
		<register id='I250' description='Partidas do lancamento'>
			<superior>I200</superior>
			<table>TMPCSB</table>
			<initiating>
				<instruction>dbSelectArea("CSB")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCSB",1," SELECT *  FROM " + RetSQLTab("CSB") + " WHERE CSB_CODREV = '" + CS0->CS0_CODREV + "' AND CSB_NUMLOT = '" + TMPCSA->CSA_NUMLOT + "' AND CSB_DTLANC = '" + TMPCSA->CSA_DTLANC + "' AND " + RetSQLCond("CSB"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I250"'                ></field>
					<field name='COD_CTA'      type='C' size='000' dec='0' instruction='TMPCSB->CSB_CODCTA'   ></field>
					<field name='COD_CCUS'     type='C' size='000' dec='0' instruction='TMPCSB->CSB_CCUSTO'   ></field>
					<field name='VL_DC'        type='N' size='000' dec='2' instruction='TMPCSB->CSB_VLPART'    ></field>
					<field name='IND_DC'       type='C' size='001' dec='0' instruction='TMPCSB->CSB_INDDC'       ></field>
					<field name='NUM_ARQ'      type='C' size='000' dec='0' instruction='TMPCSB->CSB_NUMARQ'   ></field>
					<field name='COD_HIST_PAD' type='C' size='000' dec='0' instruction='TMPCSB->CSB_CODHIST' ></field>
					<field name='HIST'         type='C' size='000' dec='0' instruction='STRTRAN(TMPCSB->CSB_HISTOR,Chr(13)+Chr(10)," ")'></field>
					<field name='COD_PART'     type='C' size='000' dec='0' instruction='TMPCSB->CSB_CODPAR'  ></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I250",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSB",2)]]></instruction>
			</finishing>
		</register>
		<register id='I256' description='Partidas do lancamento'>
			<superior>I250</superior>
			<table>TMPCSL</table>
			<initiating>
				<instruction>dbSelectArea("CSL")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCSL",1," SELECT *  FROM " + RetSQLTab("CSL") + " WHERE CSL_CODREV = '" + CS0->CS0_CODREV + "' AND CSL_NUMARQ= '" + TMPCSB->CSB_NUMARQ + "' AND " + RetSQLCond("CSL"))]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I256"'               ></field>
					<field name='COD_CTA_REF'  type='C' size='000' dec='0' instruction='TMPCSL->CSL_CTAREF'   ></field>
					<field name='VL_DC'        type='N' size='000' dec='2' instruction='TMPCSL->CSL_VLPART'   ></field>
					<field name='IND_DC'       type='C' size='001' dec='0' instruction='TMPCSL->CSL_INDDC'    ></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I256",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSL",2)]]></instruction>
			</finishing>
		</register>
		<register id='I350' description='Saldo das contas de resultado antes do encerramento'>
			<superior>I001</superior>
			<table>TMPCSAENC</table>
			<initiating>
				<instruction>dbSelectArea("CSA")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCSAENC",1, "SELECT CSA_DTLANC FROM " + RetSQLTab("CSA") +" WHERE CSA_CODREV = '"+CS0->CS0_CODREV+"' AND CSA_DTLANC >= '"+DTOS(CS0->CS0_DTINI)+"' AND CSA_DTLANC <= '"+DTOS(CS0->CS0_DTFIM)+"' AND CSA_INDTIP = 'E' AND "+ RetSQLCond("CSA") + " GROUP BY CSA_DTLANC ORDER BY CSA_DTLANC" )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I350"'                   ></field>
					<field name='DT_RES'       type='D' size='008' dec='0' instruction='STOD(TMPCSAENC->CSA_DTLANC)'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I350",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSAENC",2)]]></instruction>
			</finishing>
		</register>
		<register id='I355' description='Detalhes dos Saldos das contas de resultado antes do encerramento'>
			<superior>I350</superior>
			<table>TMPCSBENC</table>
			<initiating>
				<instruction>dbSelectArea("CSB")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCSBENC" ,1,"SELECT CSB_CODCTA,CSB_CCUSTO,SUM(CSB_VLPART) CSB_VLPART FROM(SELECT CSB_CODCTA,CSB_CCUSTO,CASE CSB_INDDC WHEN 'D' THEN -1 * CSB_VLPART WHEN 'C' THEN CSB_VLPART END CSB_VLPART FROM " + RetSQLTab("CSA") +" INNER JOIN " + RetSQLTab("CSB") +" ON CSA_FILIAL = CSB_FILIAL AND CSA_CODREV = CSB_CODREV AND CSA_DTLANC = CSB_DTLANC AND CSA_NUMLOT = CSB_NUMLOT WHERE CSA_CODREV= '"+CS0->CS0_CODREV+"' AND CSA_DTLANC = '"+TMPCSAENC->CSA_DTLANC+"' AND CSA_INDTIP = 'E' AND CSB_CODCTA IN ( SELECT DISTINCT CS3_CONTA FROM " + RetSQLTab("CS3") +" WHERE CS3_CODREV = '"+CS0->CS0_CODREV+"' AND CS3_CODNAT='04' AND "+ RetSQLCond("CS3") + " ) AND 	" + RetSQLCond("CSA,CSB") + " ) ABCDE GROUP BY CSB_CODCTA,CSB_CCUSTO " )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I355"'                 ></field>
					<field name='COD_CTA'      type='C' size='000' dec='0' instruction='TMPCSBENC->CSB_CODCTA'    ></field>
					<field name='CCUSTO'       type='C' size='000' dec='0' instruction='TMPCSBENC->CSB_CCUSTO'    ></field>
					<field name='VL_CTA'       type='N' size='000' dec='2' instruction='ABS(TMPCSBENC->CSB_VLPART)'></field>
					<field name='IND_DC'       type='C' size='001' dec='0'><instruction><![CDATA[IIF(TMPCSBENC->CSB_VLPART>0,"D","C")]]></instruction></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I355",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery( "TMPCSBENC" , 2 )]]></instruction>
			</finishing>
		</register>
		<register id='I356' description='Detalhes dos Saldos das contas de resultado antes do encerramento'>
			<superior>I355</superior>
			<table>TMPCSBEN1</table>
			<initiating>
				<instruction>dbSelectArea("CSB")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCSBEN1" ,1,"SELECT CSB_CODCTA,CS4_CTAREF,CSB_CCUSTO,SUM(CSB_VLPART) CSB_VLPART FROM(SELECT CSB_CODCTA,CS4_CTAREF,CSB_CCUSTO,CASE CSB_INDDC WHEN 'D' THEN -1 * CSB_VLPART WHEN 'C' THEN CSB_VLPART END CSB_VLPART FROM " + RetSQLTab("CSA") +" INNER JOIN " + RetSQLTab("CSB") +" ON CSA_FILIAL = CSB_FILIAL AND CSA_CODREV = CSB_CODREV AND CSA_DTLANC = CSB_DTLANC AND CSA_NUMLOT = CSB_NUMLOT INNER JOIN " + RetSQLTab("CS4")+"ON	CS4_FILIAL = CSB_FILIAL AND CS4_CONTA = CSB_CODCTA AND CS4_CCUSTO = CSB_CCUSTO WHERE CSA_CODREV= '"+CS0->CS0_CODREV+"' AND CS4_CODREV= '"+CS0->CS0_CODREV+"' AND CSA_DTLANC = '"+TMPCSAENC->CSA_DTLANC+"' AND CSA_INDTIP = 'E' AND CSB_CODCTA = '"+TMPCSBENC->CSB_CODCTA+"' AND CSB_CCUSTO  = '"+TMPCSBENC->CSB_CCUSTO +"' AND " + RetSQLCond("CSA,CSB,CS4") + " ) ABCDE GROUP BY CSB_CODCTA,CS4_CTAREF,CSB_CCUSTO " )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I356"'                 ></field>
					<field name='COD_CTA_REF'  type='C' size='000' dec='0' instruction='TMPCSBEN1->CS4_CTAREF'    ></field>
					<field name='VL_CTA'       type='N' size='000' dec='2' instruction='ABS(TMPCSBEN1->CSB_VLPART)'></field>
					<field name='IND_DC'       type='C' size='001' dec='0'><instruction><![CDATA[IIF(TMPCSBEN1->CSB_VLPART>0,"D","C")]]></instruction></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[19]++</instruction>
				<instruction>Eval({||cReg := "I356",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery( "TMPCSBEN1" , 2 )]]></instruction>
			</finishing>
		</register>
		<register id='I990' description='Encerramento do Bloco I'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>			
				<fields>
					<field name='REG'          type='C' size='004' dec='0' instruction='"I990"'                ></field>
					<field name='QTD_LIN_I'    type='N' size='000' dec='0' instruction='aTotal[19]'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>Eval({||cReg := "I990",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='J001' description='Abertura do bloco J'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"J001"'></field>
					<field name='IND_DATA'   type='N' size='001' dec='0' instruction='0'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[18]++</instruction>
				<instruction>Eval({||cReg := "J001",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='J930' description='Identificacao dos signatarios da escrituracao'>
			<superior>J001</superior>
			<table>TMPCS8</table>
			<initiating>
				<instruction>dbSelectArea("CS8")</instruction>
				<instruction><![CDATA[ECDQuery("TMPCS8",1,"SELECT * FROM " + RetSQLTab("CS8") + " WHERE CS8_CODREV = '"+CS0->CS0_CODREV+"' AND " + RetSQLCond("CS8") ) ]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'             type='C' size='004' dec='0' instruction='"J930"'></field>
					<field name='IDENT_NOM'       type='C' size='000' dec='0' instruction='TMPCS8->CS8_NOME'></field>
					<field name='IDENT_CPF_CNPJ'  type='C' size='000' dec='0' instruction='If(Empty(TMPCS8->CS8_CPF),TMPCS8->CS8_CGC,TMPCS8->CS8_CPF)'></field>
					<field name='IDENT_QUALIF'    type='C' size='000' dec='0' instruction='TMPCS8->CS8_QUALIF'></field>
					<field name='COD_ASSIN'       type='C' size='000' dec='0' instruction='TMPCS8->CS8_CODASS'></field>
					<field name='IND_CRC'         type='C' size='011' dec='0' instruction='TMPCS8->CS8_CRC'></field>
				</fields>
				<count>
				<instruction>aTotal[18]++</instruction>
				<instruction>Eval({||cReg := "J930",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCS8",2)]]></instruction>
			</finishing>
		</register>
		<register id='J990' description='Encerramento do bloco J'>
			<superior>J001</superior>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"J990"'></field>
					<field name='QTD_LIN_J'  type='N' size='000' dec='0' instruction='aTotal[18]'></field>
				</fields>
				<count>
				<instruction>Eval({||cReg := "J990",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='M001' description='Abertura do Bloco M'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"M001"'></field>
					<field name='IND_DATA'   type='N' size='001' dec='0' instruction='0'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[14]++</instruction>
				<instruction>Eval({||cReg := "M001",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='M020' description='Qualificacao da Pessoa Juridica e Retificacao'>
			<superior>M001</superior>
			<table>TMPCSM</table>
			<initiating>
				<instruction>dbSelectArea("CSM")</instruction>
				<instruction><![CDATA[ECDQuery( "TMPCSM",1,"SELECT * FROM " + RetSQLTab("CSM") + " WHERE CSM_CODREV = '"+CS0->CS0_CODREV+"' AND " + RetSQLCond("CSM") )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'              type='C' size='004' dec='0' instruction='"M020"'></field>
					<field name='QUALI_PJ'         type='C' size='002' dec='0' instruction='TMPCSM->CSM_QUALPJ'></field>
					<field name='TIPO_ESCRIT'      type='N' size='001' dec='0' instruction='TMPCSM->CSM_TPESCR'></field>
					<field name='NRO_REC_ANTERIOR' type='C' size='041' dec='0' instruction='TMPCSM->CSM_RECANT'></field>
					<field name='ID_ESCR_PER_ANT'  type='C' size='040' dec='0' instruction='""'></field>
					<field name='SIT_SLD_PER_ANT'  type='C' size='001' dec='0' instruction='""'></field>
					<field name='IND_LCTO_INI_SLD' type='C' size='001' dec='0' instruction='""'></field>
					<field name='FORM_APUR'        type='C' size='001' dec='0' instruction='TMPCSM->CSM_FMAPUR'></field>
					<field name='FORM_TRIBUT'      type='N' size='001' dec='0' instruction='TMPCSM->CSM_FMTRIB'></field>
					<field name='TRIM_LUC_ARB'     type='C' size='004' dec='0' instruction='TMPCSM->CSM_TARBIT'></field>
					<field name='FORM_TRIB_TRI'    type='C' size='004' dec='0' instruction='TMPCSM->CSM_APUTRI'></field>  
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[14]++</instruction>
				<instruction>Eval({||cReg := "M020",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMPCSM",2)]]></instruction>
			</finishing>
		</register>
		<register id='M025' description='Saldos Iniciais das Contas Patrimoniais Recuperados/Preenchidos'>
			<superior>M001</superior>
			<table>TMP_CSC</table>
			<initiating>
				<instruction>dbSelectArea("CSC")</instruction>
				<instruction><![CDATA[ECDQuery( "TMP_CSC",1,"SELECT CSC_CONTA,CS4_CCUSTO,CS4_CTAREF,CS4_TPUTIL,SUM(CSC_VALINI) CSC_VALINI,CSC_INDINI FROM "+RetSQLTab("CSC")+", "+RetSQLTab("CS4")+" WHERE CSC_CODREV = '"+CS0->CS0_CODREV+"' AND CS4_CODREV = '"+CS0->CS0_CODREV+"' AND CSC_CONTA = CS4_CONTA AND CSC_CCUSTO = CS4_CCUSTO AND CSC_CONTA IN ( SELECT DISTINCT CS3_CONTA FROM " + RetSQLTab("CS3") + " WHERE CS3_CODREV = '"+CS0->CS0_CODREV+"' AND CS3_CODNAT IN ('01','02', '03') AND "+RetSQLCond("CS3")+") AND CSC_DTINI = '"+DTOS(CS0->CS0_DTINI)+"' AND " + RetSQLCond("CSC")+" AND " + RetSQLCond("CS4")+" GROUP BY CSC_CONTA, CS4_CCUSTO, CS4_CTAREF, CSC_INDINI, CS4_TPUTIL ORDER BY CSC_CONTA, CS4_CCUSTO, CS4_CTAREF, CSC_INDINI, CS4_TPUTIL " )]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'              type='C' size='004' dec='0' instruction='"M025"'></field>
					<field name='COD_CTA'          type='C' size='000' dec='0' instruction='TMP_CSC->CSC_CONTA'></field>
					<field name='COD_CCUSTO'       type='C' size='000' dec='0' instruction='TMP_CSC->CS4_CCUSTO'></field>
					<field name='COD_CTAREF'       type='C' size='000' dec='0' instruction='TMP_CSC->CS4_CTAREF'></field>
					<field name='VL_SLD_FIN_FC'    type='N' size='019' dec='2' instruction='If(TMP_CSC->CS4_TPUTIL$"FA",TMP_CSC->CSC_VALINI,0)'></field>
					<field name='IND_DC_FIN_FC'    type='C' size='001' dec='0' instruction='If(TMP_CSC->CS4_TPUTIL$"FA",TMP_CSC->CSC_INDINI,"D")'></field>
					<field name='VL_SLD_FIN_SOC'   type='N' size='019' dec='2' instruction='If(TMP_CSC->CS4_TPUTIL$"SA",TMP_CSC->CSC_VALINI,0)'></field>
					<field name='IND_DC_FIN_SOC'   type='C' size='001' dec='0' instruction='If(TMP_CSC->CS4_TPUTIL$"SA",TMP_CSC->CSC_INDINI,"D")'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[14]++</instruction>
				<instruction>Eval({||cReg := "M025",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMP_CSC",2)]]></instruction>
			</finishing>
		</register>
		<register id='M030' description='Identificacao do Periodo de Apuracao do Lucro Real'>
			<superior>M001</superior>
			<table>TMP_CSM</table>
			<initiating>
				<instruction>dbSelectArea("CSM")</instruction>
				<instruction><![CDATA[ECDQuery( "TMP_CSM",1,"SELECT CSB_FILIAL, CSC_DTINI, CSC_DTFIM, CSM_FMAPUR, SUM(CASE CSB_INDDC WHEN 'D' THEN -1 * CSB_VLPART WHEN 'C' THEN CSB_VLPART END) CSB_VLPART FROM "+ RetSQLTab("CSA")+","+RetSQLTab("CSB")+","+RetSQLTab("CSM")+","+RetSQLTab("CS3")+","+RetSQLTab("CSC")+" WHERECSA_FILIAL = CSB_FILIAL AND CSA_CODREV = CSB_CODREV AND CSA_DTLANC = CSB_DTLANC AND CSA_NUMLOT = CSB_NUMLOT AND CSB_CODREV = '"+CS0->CS0_CODREV+"' AND CSA_INDTIP = 'E' AND CS3_CODREV = '"+CS0->CS0_CODREV+"' AND CS3_CONTA = CSB_CODCTA AND CS3_CODNAT='03' AND CSM_CODREV = '"+CS0->CS0_CODREV+"' AND CSB_CODCTA = CSM_APUCTA AND CSB_CCUSTO = CSM_APUCC AND CSC_CODREV = '"+CS0->CS0_CODREV+"' AND CSC_CONTA = CSM_APUCTA AND CSB_DTLANC = CSC_DTFIM AND "+ RETSQLCOND('CSA')+" AND "+ RETSQLCOND('CSB')+" AND "+ RETSQLCOND('CSM')+" AND "+ RETSQLCOND('CS3')+" AND "+ RETSQLCOND('CSC')+" GROUP BY CSB_FILIAL, CSC_DTINI, CSC_DTFIM, CSM_FMAPUR ")]]></instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'              type='C' size='004' dec='0' instruction='"M030"'></field>
					<field name='IND_PER'          type='C' size='003' dec='0' instruction='Ind_Per(TMP_CSM->CSM_FMAPUR,TMP_CSM->CSC_DTINI,TMP_CSM->CSC_DTFIM)'></field>
					<field name='VL_LUC_LIQ'       type='N' size='019' dec='2' instruction='ABS(TMP_CSM->CSB_VLPART)'></field>
					<field name='IND_LUC_LIQ'      type='C' size='001' dec='0' instruction='If("-"$Str(TMP_CSM->CSB_VLPART),"D","C")'></field>
				</fields>
				<count>
				<instruction>aTotal[11]++</instruction>
				<instruction>aTotal[14]++</instruction>
				<instruction>Eval({||cReg := "M030",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
			<finishing>
				<instruction><![CDATA[ECDQuery("TMP_CSM",2)]]></instruction>
			</finishing>
		</register>
		<register id='M990' description='Encerramento do Bloco M'>
			<superior>M001</superior>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"M990"'></field>
					<field name='QTD_LIN_J'  type='N' size='000' dec='0' instruction='aTotal[14]'></field>
				</fields>
				<count>
				<instruction>Eval({||cReg := "J990",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='9001' description='Abertura do bloco 9'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"9001"'></field>
					<field name='IND_DATA'   type='N' size='001' dec='0' instruction='0'></field>
				</fields>
				<count>
				<instruction>aTotal[17]++</instruction>
				<instruction>Eval({||cReg := "9001",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				<instruction>Eval({||cReg := "9990",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				<instruction>Eval({||cReg := "9999",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,1}),aTotal[15][nScan][02]++)})</instruction>
				<instruction>Eval({||cReg := "9900",nScan := aScan(aTotal[15],{|x| x[1] == cReg}),IIf(nScan==0,aadd(aTotal[15],{cReg,Len(aTotal[15])+1}),aTotal[15][nScan][02]++)})</instruction>
				</count>
			</lines>
		</register>
		<register id='9900' description='Registros do arquivo'>
			<table>TRB</table>
			<initiating>
				<instruction><![CDATA[ECDGrvTmp("TRB",1,{{"REG","C",4,0},{"NREG","N",18,0}},aTotal[15])]]></instruction>
				<instruction>TRB->(dbGotop())</instruction>
			</initiating>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'         type='C' size='004' dec='0' instruction='"9900"'></field>
					<field name='REG_BLC'     type='C' size='004' dec='0' instruction='TRB->REG'></field>
					<field name='QTD_REG_BLC' type='N' size='000' dec='0' instruction='TRB->NREG'></field>
				</fields>
				<count>
				<instruction>aTotal[16]+=TRB->NREG</instruction>
				<instruction>aTotal[17]++</instruction>
				</count>
			</lines>
			<finishing>
				<instruction>ECDGrvTmp("TRB",2)</instruction>
			</finishing>
		</register>
		<register id='9990' description='Encerramento do bloco 9'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"9990"'></field>
					<field name='QTD_LIN_9'  type='N' size='000' dec='0' instruction='aTotal[17]+1'></field>
				</fields>
			</lines>
		</register>
		<register id='9999' description='Encerramento do arquivo digital'>
			<lines Delimited='|' NumericNull='F' DecimalPoint=',' DateFormat='DDMMYYYY' DateNull='T' StringNull='T'>
				<fields>
					<field name='REG'        type='C' size='004' dec='0' instruction='"9999"'></field>
					<field name='QTD_LIN'    type='N' size='000' dec='0' instruction='aTotal[16]'></field>
				</fields>
			</lines>
		</register>
	</registers>
	</layout>
</LayOutCTB>
