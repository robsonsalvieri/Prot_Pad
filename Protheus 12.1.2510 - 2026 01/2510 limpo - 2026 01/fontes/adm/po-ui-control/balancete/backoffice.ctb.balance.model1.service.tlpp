#include "tlpp-core.th"
#include "tlpp-rest.th"
#include "backoffice.ctb.balance.model1.service.ch"

namespace totvs.protheus.backoffice.ctb.balance.model1
using namespace totvs.protheus.backoffice.reconciliation.util
//-------------------------------------------------------------------
/*/{Protheus.doc} GetBalanceteService
Classe de serviço, realizada instância e chamada de métodos de serviços

@author Totvs
/*/

//-------------------------------------------------------------------
class GetBalanceModel1Service
    public method new()
    public method getInstance()
    public method getAllGetBalanceModel1()
endclass

//-------------------------------------------------------------------
/*/{Protheus.doc} GetBalanceModel1Service
Metodo construtor

@author Totvs
/*/
//-------------------------------------------------------------------
method new() class GetBalanceModel1Service
return

//-------------------------------------------------------------------
/*/{Protheus.doc} GetBalanceteService
Responsável por instanciar a classe controller

@author Totvs
/*/
//-------------------------------------------------------------------
method getInstance() class GetBalanceModel1Service
    static __instance As Object
    
    If ValType(__instance) == "U"
        __instance := GetBalanceModel1Service():new()
    EndIf
return

//-------------------------------------------------------------------
/*/{Protheus.doc} getAllGetBalancete
Responsável por chamar a consulta e parsear o retorno no formato JSON

@author Totvs
/*/
//-------------------------------------------------------------------
method getAllGetBalanceModel1( oJBody as json, aUrlFilter as array, aFils as array ) class GetBalanceModel1Service
    Local jResponse     := JsonObject():new() As Json
    Local oMyData       := GetBalanceModel1ProtheusData():getData() As Object

    If oJBody["INDICADORES"]== 1 
        oMyData:getAllGesp( oJBody, aUrlFilter, aFils )
    Else
        oMyData:getAllData( oJBody, aUrlFilter, aFils )
    EndIf

    IIf(oMyData:lOk,; 
            jResponse := oMyData:getJSONResponse(),; 
            jResponse := SetRestFault(oMyData:GetCode(), oMyData:getMessage())  )
    
    oMyData:DeActivate()
    FreeObj(oMyData)
return jResponse
//-------------------------------------------------------------------
/*/{Protheus.doc} getAllGetBalancete
Responsável por chamar a consulta e parsear o retorno no formato JSON

@author Totvs
/*/
//-------------------------------------------------------------------

