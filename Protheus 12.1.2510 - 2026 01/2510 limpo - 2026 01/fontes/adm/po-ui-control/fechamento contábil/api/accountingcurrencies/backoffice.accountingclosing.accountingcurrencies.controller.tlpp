#Include "BACKOFFICE.ACCOUNTINGCLOSING.ACCOUNTINGCURRENCIES.CONTROLLER.CH"
#include "tlpp-core.th"

namespace totvs.protheus.backoffice.accountingclosing.accountingcurrencies
using namespace totvs.protheus.backoffice.accountingclosing.util

//-------------------------------------------------------------------
/*/{Protheus.doc} AccountingCurrencies
Classe principal de controle, onde é inicializado o EndPoint

@author Totvs
/*/
//-------------------------------------------------------------------
class AccountingCurrencies
    public method new()

    @Get("/api/fc/accountingcurrencies/")
    public method getAllAccountingCurrencies()

endclass

//-------------------------------------------------------------------
/*/{Protheus.doc} AccountingCurrencies
Metodo construtor

@author Totvs
/*/
//-------------------------------------------------------------------
method new() class AccountingCurrencies
return

//-------------------------------------------------------------------
/*/{Protheus.doc} getAllAccountingCurrencies
Metodo que inicia a chamada das configuracoes das definições de fechamento
do Fechamento Contabil

@author Totvs
/*/
//-------------------------------------------------------------------
method getAllAccountingCurrencies() class AccountingCurrencies
    Local oService  As Object
    Local jResposta As Json
    Local cFilBkp   As Character   
    Local lResponse As Logical
    Local cChaveRes As Character
    Local cResponse As Character	

    //Inicilaiza variaveis
    oService  := AccountingCurrenciesService():getInstance()
    jResposta := JsonObject():new()
    cFilBkp   := cFilAnt
    lResponse := .F.
    cChaveRes := "message"
    cResponse := STR0001
    
    //fcGetPageAndPageSize()
    fcGetHeaders()

    jResposta:fromJson(oService:getAllAccountingCurrencies())

    IIf(ValType(jResposta:GetJsonText("items")) <> "U",; 
        fcAnswerRest(jResposta, .T.),;
        fcSetResponse(lResponse, cChaveRes, cResponse, .F.))

    //Restaura empresa e filial
    cFilAnt := cFilBkp

    //Limpa array
	FWFreeArray()
return
