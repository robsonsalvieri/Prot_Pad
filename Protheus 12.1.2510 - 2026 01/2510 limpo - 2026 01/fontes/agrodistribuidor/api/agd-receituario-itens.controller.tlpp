#include 'tlpp-core.th'
#include 'tlpp-rest.th'
#include 'TOTVS.CH'

#DEFINE PATH_URL '/api/agd/v1/receituario-itens'


namespace agd.receituarioItensApi  /*nameSpace - para ser importado em shortcurt*/
using namespace agd.restUtils /*shortCurt de funcao*/
using namespace agd.receituarioItensService

/*/{Protheus.doc} agdReceituarioItensApi
Produtos da Receita Agronômica
@type class
@version 12
@author jean.schulze
@since 26/11/2025
/*/
class agdReceituarioItensApi
  public Data nPage     As Integer
  public Data nPageSize As Integer

  public method new()

  @Get(PATH_URL)
  public method listar() as logical

endClass

/*/{Protheus.doc} new
Constructor
@type method
@version 12
@author jean.schulze
@since 26/11/2025
@return variant, self
/*/
method new() class agdReceituarioItensApi
return self

/*/{Protheus.doc} listar
Lista os produtos de uma receita agronômica
@type method
@version 12
@author jean.schulze
@since 26/11/2025
@return logical, nil
/*/
method listar() as logical class agdReceituarioItensApi
    Local oService As Object
    Local oRestService As Object
    Local oJsonQryParam := Nil

    oRestService := agdRestUtils():New()
    oService := agdReceituarioItensService():New()

    oRestService:getPageAndPageSize(@Self:nPage, @Self:nPageSize)
    oJsonQryParam := oRestService:getQueryParams()
     
    oService:listar(Self:nPage, Self:nPageSize, oJsonQryParam)

    oRestService:setAPIResponse(oRest, oService)

    FreeObj(oService)
    FreeObj(oRestService)
return .T.
