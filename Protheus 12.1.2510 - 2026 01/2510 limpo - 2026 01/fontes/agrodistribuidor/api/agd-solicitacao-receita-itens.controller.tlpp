#include 'tlpp-core.th'
#include 'tlpp-rest.th'
#include 'TOTVS.CH'

#DEFINE PATH_URL '/api/agd/v1/solicitacao-receitas-itens'


namespace agd.solicitacaoReceitaItensApi  /*nameSpace - para ser importado em shortcurt*/
using namespace agd.restUtils /*shortCurt de funcao*/
using namespace agd.solicitacaoReceitaItensService

/*/{Protheus.doc} agdSolicitacaoReceitaItensApi
Controller Receituarios
@version 12
@author carlos.augusto
@since 30/10/2025
/*/
class agdSolicitacaoReceitaItensApi
  public Data nPage     As Integer
  public Data nPageSize As Integer

  public method new()

  @Get(PATH_URL)
  public method listar() as logical

endClass

/*/{Protheus.doc} new
Constructor
@version 12
@author carlos.augusto
@since 30/10/2025
@return variant, instância
/*/
method new() class agdSolicitacaoReceitaItensApi
return self

/*/{Protheus.doc} listar
Recurso REST para listar receituario
@version 12
@author carlos.augusto
@since 30/10/2025
@return logical, true
/*/
method listar() as logical class agdSolicitacaoReceitaItensApi
    Local oService As Object
    Local oRestService As Object
    Local oJsonQryParam := Nil

    oRestService := agdRestUtils():New()
    oService := agdSolicitacaoReceitaItensService():New()

    oRestService:getPageAndPageSize(@Self:nPage, @Self:nPageSize)
    oJsonQryParam := oRestService:getQueryParams()
     
    oService:listar(Self:nPage, Self:nPageSize, oJsonQryParam)

    oRestService:setAPIResponse(oRest, oService)

    FreeObj(oService)
    FreeObj(oRestService)
return .T.
