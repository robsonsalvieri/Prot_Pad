#INCLUDE 'totvs.ch'
#INCLUDE 'tlpp-core.th'
#INCLUDE 'agd.feature.tco.interface.ch'
#INCLUDE 'agd.tco.comercializacao.tac.dto.ch'

using namespace agd.tcoComercializacaoTACValidator

/*/{Protheus.doc} agdTCOComercializacaoTACDTO
Repositorio do TCO
@type class
@version 12
@author jean.schulze
@since 26/09/2025
/*/
class agdTCOComercializacaoTACDTO implements FeatureTCO  
	public method new()
    Public Method getCodigo() as character
	Public Method getDescricao() as character
    Public Method getTipo() as character
	Public Method getRelease() as character
    Public Method getParametros() as array
    Public Method getCadastrosBasicos() as array    
    Public Method getCompartilhamentoTabela() as array
	Public Method getIdentificaoIntegracao() as character
	Public Method getTabelasDePara() as array 
	Public Method getDocumentacaoTDN() as character
	Public Method getAdapter() as array
	Public Method getCheckAtivacao() as array
    Public Method getCheckFinalizacao() as array
	Public Method getValidator() as object
	Public Method getAllExternalIds() as json

	Private Method getExternalIdTES() as json
endClass

/*/{Protheus.doc} New
Constructor
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return variant, retorno
/*/
method New() class agdTCOComercializacaoTACDTO
return Self

/*/{Protheus.doc} getCodigo
Código da Feature
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return character, retorno
/*/
Method getCodigo() as character Class agdTCOComercializacaoTACDTO
return "INTEGRACAO_COMERCIALIZACAO_TAC"

/*/{Protheus.doc} getDescricao
Descrição da Feature
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return character, retorno
/*/
Method getDescricao() as character Class agdTCOComercializacaoTACDTO
return STR0001

/*/{Protheus.doc} getTipo
Tipo Feature
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return character, retorno
/*/
Method getTipo() as character Class agdTCOComercializacaoTACDTO
return "2" //Integracao

/*/{Protheus.doc} getRelease
Release de Expedição
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return character, retorno
/*/
Method getRelease() as character Class agdTCOComercializacaoTACDTO
return "12.1.25"

/*/{Protheus.doc} getParametros
Lista de Parâmetros
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return variant, retorno
/*/
Method getParametros() Class agdTCOComercializacaoTACDTO
	Local arrayReturn := {}
	
Return arrayReturn

/*/{Protheus.doc} getCadastrosBasicos
Lista de Cadastros Básicos
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return variant, retorno
/*/
Method getCadastrosBasicos() Class agdTCOComercializacaoTACDTO
	Local arrayReturn := {}

Return arrayReturn

/*/{Protheus.doc} getCompartilhamentoTabela
Lista de Compartilhamento de tabelas
@type method
@version 12
@author jean.schulze
@since 26/09/2025
@return variant, retorno
/*/
Method getCompartilhamentoTabela() Class agdTCOComercializacaoTACDTO
	Local arrayReturn := {}

Return arrayReturn

/*/{Protheus.doc} getIdentificaoIntegracao
Retorna o Identificador para as configurações de Integração
@type method
@version 12
@author Gilson.Venturi
@since 15/10/2025
@return character, retorno
/*/
Method getIdentificaoIntegracao() as character Class agdTCOComercializacaoTACDTO
return "AGD-TAC" //15 caracteres no maximo

/*/{Protheus.doc} getTabelasDePara
Retorna a Lista de Tabelas e Campos disponiveis para realizar o de-para
@type method
@version 12
@author jean.schulze
@since 31/10/2025
@return array, lista de tabela e campo {{cTabela, cCampo}, ...}
/*/
Method getTabelasDePara() as array Class agdTCOComercializacaoTACDTO
	Local aTabelasDePara as array

	aTabelasDePara := {;
		agdFeatUtils():buildTabelaDePara("SA1", "A1_COD"   ),; // Clientes                      
		agdFeatUtils():buildTabelaDePara("SB1", "B1_COD"   ),; // Descrição Genérica do Produto 
		agdFeatUtils():buildTabelaDePara("SBM", "BM_GRUPO" ),; // Grupo de Produto              
		agdFeatUtils():buildTabelaDePara("SF4", "F4_CODIGO");  // Tipos de Entrada e Saida 
		}
return aTabelasDePara

/*/{Protheus.doc} getDocumentacaoTDN
Retorna o link do TDN para a Feature
@type method
@version 12
@author Gilson.Venturi
@since 15/10/2025
@return character, retorno
/*/
Method getDocumentacaoTDN() as character Class agdTCOComercializacaoTACDTO
return ''

/*/{Protheus.doc} getAdapter
Lista de Adapters - Tabela XX4
@type method
@version 12
@author Gilson.Venturi
@since 10/10/2025
@return array, {{cRotina, cModelo}, ...}
/*/
Method getAdapter() as array Class agdTCOComercializacaoTACDTO
	Local aAdapters as array

	aAdapters := {;
		agdFeatUtils():buildAdapters("MATA103B", "INVOICE"),; // Documento de Entrada
		agdFeatUtils():buildAdapters("MATA461" , "MATA461"); // Documento de Saída
		}
Return aAdapters


/*/{Protheus.doc} getCheckAtivacao
Checagem de Ativação da Feature - Uso na seleção do WIZARD
@type method
@version 12
@author jean.schulze
@since 12/19/2025
@return variant, Array com os Erros/Impedimentos da Feature
/*/
Method getCheckAtivacao() Class agdTCOComercializacaoTACDTO
Return {}

/*/{Protheus.doc} getCheckFinalizacao
Checagem de Finalização da Feature - Uso no finalizar da Configuração
@type method
@version 12
@author jean.schulze
@since 12/19/2025
@return variant, 5
@return variant, Array com os Erros/Impedimentos da Feature
/*/
Method getCheckFinalizacao() Class agdTCOComercializacaoTACDTO
Return {}


/*/{Protheus.doc} getValidator
Retorna a classe de validação para esta feature.
@type method
@version 12
@author jc.maldonado
@since 12/12/2025
@return object, Instância do validador.
/*/
Method getValidator() as object Class agdTCOComercializacaoTACDTO
Return agdTCOComercializacaoTACValidator():New()


/*/{Protheus.doc} getAllExternalIds
Retorna todas as listas de Ids Externos para o De-Para disponíveis para a feature.
@type method
@version 12
@author jc.maldonado
@since 16/12/2025
@return json, listas de Ids Externos para o De-Para.
/*/
Method getAllExternalIds() as json Class agdTCOComercializacaoTACDTO
	local jListExternalIds := JsonObject():New() as json
	jListExternalIds['TES'] := ::getExternalIdTES()
Return jListExternalIds

/*/{Protheus.doc} getExternalIdTES
Retorna a lista de Ids Externos de "De-Para" para Tipos de Entrada e Saída (TES).
@type method
@version 12
@author jc.maldonado
@since 15/12/2025
@return json, lista ids externos 
/*/
Method getExternalIdTES() as json Class agdTCOComercializacaoTACDTO
	Local externalIdTES as json

	externalIdTES := {;
		{"chave": "COMPLEMENTO_QUANTIDADE"            , "valor": STR0002 /*"Complemento de quantidade"*/               },;
		{"chave": "COMPLEMENTO_QUANTIDADE_ARMAZENAGEM", "valor": STR0003 /*"Complemento de quantidade de armazenagem"*/},;
		{"chave": "COMPLEMENTO_VALOR"                 , "valor": STR0004 /*"Complemento de valor"*/                    },;
		{"chave": "COMPRA"                            , "valor": STR0005 /*"Compra"*/                                  },;
		{"chave": "DEPOSITO"                          , "valor": STR0006 /*"Depósito"*/                                },;
		{"chave": "DEVOLUCAO_COMPRA"                  , "valor": STR0007 /*"Devolução de compra"*/                     },;
		{"chave": "DEVOLUCAO_SIMBOLICA"               , "valor": STR0008 /*"Devolução simbólica"*/                     },;
		{"chave": "DEVOLUCAO_SIMBOLICA_ARMAZENAGEM"   , "valor": STR0009 /*"Devolução simbólica de armazenagem"*/      },;
		{"chave": "ENTRADA_ARMAZENAGEM"               , "valor": STR0010 /*"Entrada de armazem"*/                      },;
		{"chave": "ENTRADA_DEVOLUCAO"                 , "valor": STR0011 /*"Entrada de devolução"*/                    },;
		{"chave": "ENTRADA_TRANSFERENCIA"             , "valor": STR0012 /*"Entrada de transferência"*/                },;
		{"chave": "ENTREGA_FUTURA"                    , "valor": STR0013 /*"Entrega Futura"*/                          },;
		{"chave": "REMESSA"                           , "valor": STR0014 /*"Remessa"*/                                 },;
		{"chave": "REMESSA_PARA_TERCEIROS"            , "valor": STR0015 /*"Remessa para terceiros"*/                  },;
		{"chave": "RETORNO_ARMAZENAGEM"               , "valor": STR0016 /*"Retorno armazém"*/                         },;
		{"chave": "RETORNO_REMESSA_PARA_TERCEIROS"    , "valor": STR0017 /*"Retorno de remessa para terceiros"*/       },;
		{"chave": "SAIDA_ARMAZENAGEM"                 , "valor": STR0018 /*"Saída armazém"*/                           },;
		{"chave": "SAIDA_TRANSFERENCIA"               , "valor": STR0019 /*"Saída transferência"*/                     },;
		{"chave": "SAIDA_VENDA"                       , "valor": STR0020 /*"Saída venda"*/                             };
		}
Return externalIdTES
