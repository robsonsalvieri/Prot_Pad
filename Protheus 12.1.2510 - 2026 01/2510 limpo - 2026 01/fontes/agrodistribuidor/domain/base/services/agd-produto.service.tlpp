
#include "totvs.ch"
#include 'tlpp-core.th'
#include 'AGD.PRODUTO.SERVICE.CH'

namespace agd.produtoService
using namespace agd.utilsService
using namespace agd.produtoRepository /*shortCurt de funcao*/

/*/{Protheus.doc} agdProdutoService
Servico para cadastro de produtos
@type class
@version 12
@author carlos.augusto
@since 21/10/2025
/*/
class agdProdutoService FROM agdUtilsService

	public method new()
	public method setPrincipioAtivo()

endclass

/*/{Protheus.doc} new
Constructor da Classe
@type class
@version 12
@author carlos.augusto
@since 21/10/2025
/*/
method new() class agdProdutoService
	_Super:New()
return Self

/*/{Protheus.doc} setProduto
Altera o cadastro de produtos
@type class
@version 12
@author carlos.augusto
@since 21/10/2025
/*/
method setPrincipioAtivo(jBodyProduto, cProduto) class agdProdutoService
	Local oProdutoRepository As Object
	Local aFieldsSaveComand  As Array
	Default cProduto         := ""

	oProdutoRepository := agdProdutoRepository():New(cProduto)

	If oProdutoRepository:validaEntradaPrincipioAtivo(jBodyProduto)
		aFieldsSaveComand := oProdutoRepository:convertToFields(jBodyProduto)
		oProdutoRepository:updateRepository(aFieldsSaveComand)
		if oProdutoRepository:isSuccess()
			oProdutoRepository:setSuccess(STR0001)//"Produto atualizado com sucesso."
		EndIf
	EndIf

	Self:setFullResponse(oProdutoRepository)
	oProdutoRepository:DeActivate()
	FreeObj(oProdutoRepository)

return nil

