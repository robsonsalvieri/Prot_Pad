#include 'tlpp-core.th'
#include 'tlpp-rest.th'
#include 'TOTVS.CH'
#DEFINE PATH_URL '/api/agd/v1/contratos-compra-movimentos/'

namespace agd.contratosCompraMoivmentosApi /*nameSpace - para ser importado em shortcurt*/
using namespace agd.restUtils /*shortCurt de funcao*/
using namespace agd.contratoAclConsultasService

/*/{Protheus.doc} agdContratosCompraMovimentosApi
Controller de Contratos de Compra
@type class
@version 12
@author jean.schulze
@since 13/01/2025
/*/
class agdContratosCompraMovimentosApi
	public Data nPage     As Integer
	public Data nPageSize As Integer

	public method new()

	@Get(PATH_URL)
	public method listar() as logical


endClass

/*/{Protheus.doc} new
Constructor
@type method
@version 12
@author jean.schulze
@since 13/01/2025
@return variant, instância
/*/
method new() class agdContratosCompraMovimentosApi
return self

/*/{Protheus.doc} listar
Recurso REST para listar Contratos de Comrpa
@type method
@version 12
@author jean.schulze
@since 13/01/2025
@return logical, true
/*/
method listar() as logical class agdContratosCompraMovimentosApi
	Local oService As Object
	Local oRestService As Object

	oRestService := agdRestUtils():New()
	oService := agdContratoAclConsultasService():New()

	oRestService:getPageAndPageSize(@Self:nPage, @Self:nPageSize)

	oService:listarMovimentos(Self:nPage, Self:nPageSize, oRestService:getQueryParams())

	oRestService:setAPIResponse(oRest, oService)

	FreeObj(oService)
	FreeObj(oRestService)
return .T.

