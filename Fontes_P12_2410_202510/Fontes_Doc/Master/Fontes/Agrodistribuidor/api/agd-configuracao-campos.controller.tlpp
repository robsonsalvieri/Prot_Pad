#include 'tlpp-core.th'
#include 'tlpp-rest.th'
#include 'TOTVS.CH'
#DEFINE PATH_URL '/api/agd/v1/configuracao-campos/:dominio'



namespace agd.configuracaoCampos  /*nameSpace - para ser importado em shortcurt*/
using namespace agd.configuracaoCamposService
using namespace agd.restUtils /*shortCurt de funcao*/

/*/{Protheus.doc} agdConfiguracaoCampos
Controller de Negócios Barter
@type class
@version 12
@author jean.schulze
@since 13/01/2025
/*/
class agdConfiguracaoCampos
	public Data nPage     As Integer
	public Data nPageSize As Integer

	public method new()

	@Get(PATH_URL)
	public method listarCampos() as logical

endClass

/*/{Protheus.doc} new
Constructor
@type method
@version 12
@author jean.schulze
@since 13/01/2025
@return variant, inst ncia
/*/
method new() class agdConfiguracaoCampos
return self

/*/{Protheus.doc} listar
Recurso REST para listar Neg cios Barter
@type method
@version 12
@author jean.schulze
@since 13/01/2025
@return logical, true
/*/
method listarCampos() as logical class agdConfiguracaoCampos
	Local oRestService As Object
	Local agdConfiguracaoCamposService As Object
	Local cDominio as Character
	Local oJsonPath

	oRestService := agdRestUtils():New()

	oJsonPath := oRest:getPathParamsRequest()

	If ValType(oJsonPath) == "J" .And. oJsonPath:hasProperty("dominio")
		cDominio := oJsonPath["dominio"]
	EndIf

	agdConfiguracaoCamposService := agdConfiguracaoCamposService():new()
	agdConfiguracaoCamposService:getFields(cDominio)

	oRestService:setAPIResponse(oRest, agdConfiguracaoCamposService)

	FreeObj(agdConfiguracaoCamposService)
	FreeObj(oRestService)
return .T.

