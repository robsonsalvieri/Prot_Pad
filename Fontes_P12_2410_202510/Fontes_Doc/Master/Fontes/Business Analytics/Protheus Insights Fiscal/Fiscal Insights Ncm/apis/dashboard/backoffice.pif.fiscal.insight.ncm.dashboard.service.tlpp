#include "tlpp-core.th"
#include "tlpp-rest.th"

namespace totvs.protheus.backoffice.pif.fiscal.insight.ncm
using namespace totvs.protheus.backoffice.pif.util


//------------------------------------------------------------------------------
/* {Protheus.doc} InsightNcmService
    Classe de services do insights NCM
a
    @type Class
    @author Squad PIF
    @return Nil
/*/
//------------------------------------------------------------------------------
Class DashboardService 

    Public Method New() Constructor
    Public Method getDashboard() As Json
    
EndClass


//------------------------------------------------------------------------------
/* {Protheus.doc} new
    Metodo construtor

    @type Method
    @author Squad PIF
    @return Object, retorna o objeto criado
*/
//------------------------------------------------------------------------------
Method New() Class DashboardService
Return Self


//------------------------------------------------------------------------------
/* {Protheus.doc} getDashboard
    Respons√°vel por chamar a consulta de dados do dashboard de NCM

    @type Method
    @author Squad PIF
    @return Json, retorna o objeto json contendo os dados do dashboard de NCM
*/
//------------------------------------------------------------------------------
Method getDashboard() As Json Class DashboardService

    Local oJResponse          As Json
    Local oDashboardData      As Object
    Local oJDashboard         As Json

    oJResponse := JsonObject():New()
    
    oDashboardData := DashboardData():New()

    oJDashboard := oDashboardData:getDashboard()

    oJResponse := getSuccessReponse(oJDashboard)

    FWFreeObj(oDashboardData)
    FreeObj(oJDashboard)

Return ojResponse
