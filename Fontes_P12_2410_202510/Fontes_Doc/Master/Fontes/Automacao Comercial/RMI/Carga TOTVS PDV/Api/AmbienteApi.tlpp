#include "PROTHEUS.CH"
#include "tlpp-core.th"
#include "tlpp-rest.th"


/*/{Protheus.doc} GravaDadosAmbiente
API para gravar os dados de ambiente de cada Central de PDV e TOTVS PDV.
Esses dados de ambientes são compostos por:
    - Data e hora de todos os fontes;
    - Dicionario completo das tabelas SIX, SX2, SX3 e SX6
    - Versão do Binario

@author  Bruno Almeida
@since   01/10/2024
@version 1.0
@exemple: Metodo POST na URL: http://localhost:8080/REST/api/retail/v1/integrapdv/ambiente/
/*/
@post("/api/retail/v1/integrapdv/ambiente/") 
Function GravaDadosAmbiente()

Local oGrava := Ambiente():New()
oGrava:Grava()

oRest:setResponse( '{"retorno":"ok", "mensagem":"Gravacao efetuada com sucesso!"}' )

FwFreeObj(oGrava)
oGrava := Nil

Return .T.


/*/{Protheus.doc} ExcluiDadosAmbiente
API para realizar a exclusão dos dados de ambiente da Central de PDV e TOTVS PDV.

@author  Bruno Almeida
@since   01/10/2024
@version 1.0
@exemple: Metodo DELETE na URL: http://localhost:8080/REST/api/retail/v1/integrapdv/ambiente?filial=D SP 02&empPtIn=T1&codPtIn=001
/*/
@delete("/api/retail/v1/integrapdv/ambiente/")
Function ExcluiDadosAmbiente()

Local oExclui := Ambiente():New()
oExclui:Exclui()

oRest:setResponse( '{"retorno":"ok", "mensagem":"Exclusao efetuada com sucesso!"}' )

FwFreeObj(oExclui)
oExclui := Nil

Return .T.
