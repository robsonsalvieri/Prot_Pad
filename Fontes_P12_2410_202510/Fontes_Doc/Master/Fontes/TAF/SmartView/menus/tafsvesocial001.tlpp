#Include 'totvs.ch'
#include "tafsvesocial001.ch"

//-------------------------------------------------------------------
/*/{Protheus.doc} TAFSVE001

Chamada do objeto de negócios fiscal.sv.fis.rps e relatório no Smart View pela função totvs.framework.treports.callTReports  
 
@author  Evandro Italo
@since   29/11/2023
@version 1.0

/*/
Function TAFSVE001()
    local lSucess := .F. 		as logical
    local cError  := ""  		as character
    Local lConfig := .F. 		as logical
	Local lBlind  := .F.		as Logical

	lBlind := IsBlind()

    //1º parâmetro = Relatório cadastrado na tabela de De/Para (Campo TR__IDREL)
    //2º parâmetro = Tipo do relatório ("reports" = relatório comum, "data-grid" = visão de dados, "pivot-table" = tabela dinâmica)
    //3º parâmetro = Tipo do impressão (Arquivo=1, Email=2)
    //4º parâmetro = Informações de impressão
    //5º parâmetro = Parâmetros do relatório
    //6º parâmetro = Indica se executa em job
    //7º parâmetro = Indica se exibe os parâmetros para preenchimento
    //8º parâmetro = Indica se exibe o wizard de configuração do Smart View
    //9º parâmetro = Erro da execução
	lConfig := totvs.framework.smartview.util.isConfig()
	if !lConfig
		If !lBlind
			FWAlertError(STR0001) // "Smart View não configurado."
		endif
	endif
	if lConfig
		if GetRpoRelease() > '12.1.2210'
			if TafSvPerg("ESOCIAL000")
				lSuccess := totvs.framework.treports.callTReports("rh.sv.taf.esocialconference",/*2*/,/*3*/,/*4*/,/*5*/,.F.,/*7*/,.T.,@cError)
				if (!lSucess .And. !empty(cError) .and. !lBlind);FWAlertError(cError, STR0003);endif //"Smart View"
			Else
				If !lBlind
					FWAlertError(STR0004 , STR0003 ) //"Grupo de perguntas ESOCIAL000 não existe." // "Smart View"
				EndIf
			EndIf
		Else
			If !lBlind
				FWAlertError(STR0005, STR0003) //"Rotina não disponivel"
			EndIf
		EndIf
	endif
Return Nil
