#INCLUDE "protheus.ch"
#INCLUDE "totvs.ch"
#INCLUDE "msobject.ch"
#INCLUDE "totvs.framework.treports.integratedprovider.th"

NameSpace totvs.protheus.legal.sigapfs.jurapad026_previsao_faturamento_analitico.integratedprovider

@totvsFrameworkTReportsIntegratedProvider(active=.T.,;
	team='SIGAPFS',;
	tables='OH0,SA1,NT0',;
	name='Previsão de Faturamento Analítico',;
	country='ALL',;
	initialRelease='12.1.2210')

//------------------------------------------------------------------------------------
class jurapad026_previsao_faturamento_analiticoTReportsBusinessObject from totvs.framework.treports.integratedprovider.IntegratedProvider
	public    method new()        as object
	public    method getData()    as object
	public    method getSchema()  as object
	
	data lPDUserAc as logical
	
endclass

//------------------------------------------------------------------------------------
method new() class jurapad026_previsao_faturamento_analiticoTReportsBusinessObject
Local cLojaAuto := SuperGetMv( "MV_JLOJAUT" , .F. , "2" ,  )
Local cPergunte := IIF(cLojaAuto == "1",'JURPAD026B', 'JURAPAD026')

	_Super:new()

	//Define a área
	self:appendArea("Pré-Faturamento Serviços")

	//Define o nome do Objeto de Negócio
	self:setDisplayName("Previsão Analítica de Faturamento")

	//Define a descrição do Objeto de Negócio
	self:setDescription("Previsão Analítica de Faturamento")

	// Define o pergunte do Objeto de Negócio
	self:setPergunte(cPergunte)

	self:lPDUserAc := IIF(FindFunction("JPDUserAc"), JPDUserAc(), .T.) // Indica se o usuário possui acesso a dados sensíveis ou pessoais (LGPD)

	If !self:lPDUserAc
		self:setErrorStatus(400, "Acesso restrito.", "Usuário com restrição de acesso a dados pessoais/sensíveis.")
	EndIf

Return self

//------------------------------------------------------------------------------------
method getData(nPage as numeric, oFilter as object) as object class jurapad026_previsao_faturamento_analiticoTReportsBusinessObject
Local cQuery    := ""
Local cTemp     := ""
Local aBind     := {}
Local cLojaAuto := SuperGetMV("MV_JLOJAUT", .F. , "2")
Local cMoedaNac := ""
Local cSimbNac  := ""
Local jParams   := Nil
Local oJsDados  := Nil

	jParams := oFilter:getParameters() //metodo para retorno do json dos parâmetros

	If JR026SQL(jParams['MV_PAR01'][1], jParams['MV_PAR03'][1], jParams['MV_PAR04'][1], IIF(cLojaAuto == "1", JurGetLjAt(), jParams['MV_PAR05'][1]), IIF(cLojaAuto == "1", jParams['MV_PAR05'][1], jParams['MV_PAR06'][1]))[2]
		cMoedaNac := SuperGetMv('MV_JMOENAC',, '01')
		cSimbNac  := Posicione('CTO', 1, xFilial('CTO') + cMoedaNac, 'CTO_SIMB')
		cTemp     := GetNextAlias()

		//Define a quantidade máxima por página (Default 100)
		self:setPageSize(20)

		cQuery := "SELECT OHP.OH0_CCONTR, OHP.OH0_CESCR, OHP.OH0_CJCONT, "
		cQuery += "SA1.A1_COD, SA1.A1_LOJA, SA1.A1_NOME, "
		cQuery += "NT0.NT0_COD, NT0.NT0_NOME, NS7.NS7_COD, NS7.NS7_NOME,"

		cQuery += "(SELECT 'S' FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) EXVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"EX", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FAVAL, "
		
		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FA", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FAACUM, "
		
		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FA", "S"})
		
		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FXVAL, "
		
		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FX", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FXACUM, "
		
		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FX", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FCVAL, "
		
		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FC", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) FCACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"FC", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) LIVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"LI", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) LIACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"LI", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ =  ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) MIVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"MI", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) MIACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"MI", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) MTVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"MT", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) MTACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"MT", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) NCVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"NC", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) NCACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"NC", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) POVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"PO", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) POACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"PO", "S"})


		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) HRVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"HR", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) HRACUM, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"HR", "S"})

		cQuery += "(SELECT SUM(OH0_VLAM)   FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) PRVAL, "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"PR", "S"})

		cQuery += "(SELECT SUM(OH0_VLACUM) FROM " + RetSQLName("OH0") + " OH1 WHERE OH1.OH0_FILIAL = ? AND OH1.D_E_L_E_T_ = ?  AND OH1.OH0_CUSER = ? AND OH1.OH0_TIPO = ? AND OHP.OH0_CCONTR = OH1.OH0_CCONTR) PRACUM "

		AAdd(aBind, {xFilial("OH0"), "S"})
		AAdd(aBind, {" ", "S"})
		AAdd(aBind, {__CUSERID, "S"})
		AAdd(aBind, {"PR", "S"})

		cQuery += " FROM   " + RetSQLName("OH0") + " OHP"

		// NT0
		cQuery += " INNER JOIN " + RetSQLName("NT0") + " NT0"
		cQuery +=    " ON NT0.NT0_FILIAL = ?"

		AAdd(aBind, {xFilial("NT0"), "S"})

		cQuery +=   " AND NT0.NT0_COD = OHP.OH0_CCONTR"

		//Se não é loja automática 
		If cLojaAuto == "2" .AND. !Empty(jParams['MV_PAR05'][1])
			If !Empty(jParams['MV_PAR04'][1]) 
			
				cQuery += " AND NT0.NT0_CCLIEN = ?"
				AAdd(aBind, {jParams['MV_PAR04'][1], "S"})

				If !Empty(jParams['MV_PAR05'][1])

					cQuery += " AND NT0.NT0_CLOJA = ?"
					AAdd(aBind, {jParams['MV_PAR05'][1], "S"})

				EndIf	
			Endif
		Else // Loja automática 
			If !Empty(jParams['MV_PAR04'][1]) .AND. !Empty(JurGetLjAt()) 
				cQuery += " AND NT0.NT0_CCLIEN = ?"
				cQuery += " AND NT0.NT0_CLOJA = ?"

				AAdd(aBind, {jParams['MV_PAR04'][1], "S"})
				AAdd(aBind, {JurGetLjAt(), "S"})
			Endif
		EndIf

		cQuery +=   " AND NT0.D_E_L_E_T_ = ?"

		AAdd(aBind, {" ", "S"})

		// SA1
		cQuery += " INNER JOIN " + RetSQLName("SA1") + " SA1"
		cQuery +=    " ON SA1.A1_FILIAL = ?"

		AAdd(aBind, {xFilial("SA1"), "S"})

		cQuery +=   " AND SA1.A1_COD = NT0.NT0_CCLIEN"
		cQuery +=   " AND SA1.A1_LOJA = NT0.NT0_CLOJA"

		If !Empty(jParams['MV_PAR03'][1])
			cQuery += " AND SA1.A1_GRPVEN = ?"

			AAdd(aBind, {jParams['MV_PAR03'][1], "S"})
		Endif
	
		cQuery +=   " AND SA1.D_E_L_E_T_ = ?"

		AAdd(aBind, {" ", "S"})

		// NS7
		cQuery += " INNER JOIN " + RetSQLName("NS7") + " NS7"
		cQuery +=    " ON NS7.NS7_FILIAL = ?"

		AAdd(aBind, {xFilial("NS7"), "S"})

		cQuery +=   " AND NS7.NS7_COD = OHP.OH0_CESCR"
		cQuery +=   " AND NS7.D_E_L_E_T_ = ?"

		AAdd(aBind, {" ", "S"})

		cQuery += " WHERE OHP.OH0_FILIAL = ?"

		AAdd(aBind, {xFilial("OH0"), "S"})

		cQuery += " AND OHP.OH0_CUSER= ?"

		AAdd(aBind, {__CUSERID, "S"})

		If !Empty(jParams['MV_PAR02'][1])
			cQuery += " AND OHP.OH0_CESCR = ?"

			AAdd(aBind, {jParams['MV_PAR02'][1], "S"})
		Endif

		If cLojaAuto == "2"
			If !Empty(jParams['MV_PAR06'][1])
				cQuery += " AND OHP.OH0_CCONTR = ?"

				AAdd(aBind, {jParams['MV_PAR06'][1], "S"})
			Endif
		Else
			If !Empty(jParams['MV_PAR05'][1])
				cQuery += " AND OHP.OH0_CCONTR = ?"	

				AAdd(aBind, {jParams['MV_PAR05'][1], "S"})
			Endif
		EndIf

		cQuery += " AND OHP.D_E_L_E_T_= ?"

		AAdd(aBind, {" ", "S"})

		cQuery += " GROUP BY OH0_CCONTR, OH0_CESCR, OH0_CJCONT,"
		cQuery += " A1_COD, A1_LOJA, A1_NOME, NT0_COD , NT0_NOME, NS7_COD, NS7_NOME"
		cQuery += " ORDER BY OH0_CESCR, A1_COD, A1_LOJA, OH0_CCONTR"

		cQuery := JurTRepBin(cQuery, aBind)

		DBUseArea(.T., "TOPCONN", TCGenQry(NIL,NIL,cQuery), (cTemp) ,.F., .T. )

		While !(cTemp)->(Eof())
			oJsDados := JsonObject():new()
			oJsDados["OH0_CCONTR"] := (cTemp)->OH0_CCONTR
			oJsDados["OH0_CESCR"] := (cTemp)->OH0_CESCR
			oJsDados["A1_COD"] := (cTemp)->A1_COD
			oJsDados["A1_LOJA"] := (cTemp)->A1_LOJA
			oJsDados["A1_NOME"] := (cTemp)->A1_NOME
			oJsDados["NT0_COD"] := (cTemp)->NT0_COD
			oJsDados["NT0_NOME"] := (cTemp)->NT0_NOME
			oJsDados["NS7_COD"] := (cTemp)->NS7_COD
			oJsDados["NS7_NOME"] := (cTemp)->NS7_NOME
			oJsDados["EXVAL"] := (cTemp)->EXVAL
			oJsDados["FAVAL"] := (cTemp)->FAVAL
			oJsDados["FAACUM"] := (cTemp)->FAACUM
			oJsDados["FXVAL"] := (cTemp)->FXVAL
			oJsDados["FXACUM"] := (cTemp)->FXACUM
			oJsDados["FCVAL"] := (cTemp)->FCVAL
			oJsDados["FCACUM"] := (cTemp)->FCACUM
			oJsDados["LIVAL"] := (cTemp)->LIVAL
			oJsDados["LIACUM"] := (cTemp)->LIACUM
			oJsDados["MIVAL"] := (cTemp)->MIVAL
			oJsDados["MIACUM"] := (cTemp)->MIACUM
			oJsDados["MTVAL"] := (cTemp)->MTVAL
			oJsDados["MTACUM"] := (cTemp)->MTACUM
			oJsDados["NCVAL"] := (cTemp)->NCVAL
			oJsDados["NCACUM"] := (cTemp)->NCACUM
			oJsDados["POVAL"] := (cTemp)->POVAL
			oJsDados["POACUM"] := (cTemp)->POACUM
			oJsDados["HRVAL"] := (cTemp)->HRVAL
			oJsDados["HRACUM"] := (cTemp)->HRACUM
			oJsDados["PRVAL"] := (cTemp)->PRVAL
			oJsDados["PRACUM"] := (cTemp)->PRACUM
			oJsDados["MoedaNac"] := cMoedaNac
			oJsDados["SimbNac"] := cSimbNac
			self:oData:appendData(oJsDados)

			(cTemp)->(DBSkip())
		EndDo

		(cTemp)->(DBCloseArea())
	Else
		JurMsgErro("Não existem movimentações no mês de referência!",, "Verifique os parâmetros.")
	EndIf

Return self:oData

//------------------------------------------------------------------------------------
method getSchema() as object Class jurapad026_previsao_faturamento_analiticoTReportsBusinessObject

	self:oSchema:addProperty("OH0_CCONTR", "OH0_CCONTR", "string", "OH0_CCONTR", "OH0_CCONTR")
	self:oSchema:addProperty("OH0_CESCR", "OH0_CESCR", "string", "OH0_CESCR", "OH0_CESCR")
	self:oSchema:addProperty("OH0_CJCONT", "OH0_CJCONT", "string", "OH0_CJCONT", "OH0_CJCONT")
	self:oSchema:addProperty("A1_COD", "A1_COD", "string", "A1_COD", "A1_COD")
	self:oSchema:addProperty("A1_LOJA", "A1_LOJA", "string", "A1_LOJA", "A1_LOJA")
	self:oSchema:addProperty("A1_NOME", "A1_NOME", "string", "A1_NOME", "A1_NOME")
	self:oSchema:addProperty("NT0_COD", "NT0_COD", "string", "NT0_COD", "NT0_COD")
	self:oSchema:addProperty("NT0_NOME", "NT0_NOME", "string", "NT0_NOME", "NT0_NOME")
	self:oSchema:addProperty("NS7_COD", "NS7_COD", "string", "NS7_COD", "NS7_COD")
	self:oSchema:addProperty("NS7_NOME", "NS7_NOME", "string", "NS7_NOME", "NS7_NOME")
	self:oSchema:addProperty("EXVAL", "EXVAL", "string", "EXVAL", "EXVAL")
	self:oSchema:addProperty("FAVAL", "FAVAL", "number", "FAVAL", "OH0_VLAM")
	self:oSchema:addProperty("FAACUM", "FAACUM", "number", "FAACUM", "OH0_VLACUM")
	self:oSchema:addProperty("FXVAL", "FXVAL", "number", "FXVAL", "OH0_VLAM")
	self:oSchema:addProperty("FXACUM", "FXACUM", "number", "FXACUM", "OH0_VLACUM")
	self:oSchema:addProperty("FCVAL", "FCVAL", "number", "FCVAL", "OH0_VLAM")
	self:oSchema:addProperty("FCACUM", "FCACUM", "number", "FCACUM", "OH0_VLACUM")
	self:oSchema:addProperty("LIVAL", "LIVAL", "number", "LIVAL", "OH0_VLAM")
	self:oSchema:addProperty("LIACUM", "LIACUM", "number", "LIACUM", "OH0_VLACUM")
	self:oSchema:addProperty("MIVAL", "MIVAL", "number", "MIVAL", "OH0_VLAM")
	self:oSchema:addProperty("MIACUM", "MIACUM", "number", "MIACUM", "OH0_VLACUM")
	self:oSchema:addProperty("MTVAL", "MTVAL", "number", "MTVAL", "OH0_VLAM")
	self:oSchema:addProperty("MTACUM", "MTACUM", "number", "MTACUM", "OH0_VLACUM")
	self:oSchema:addProperty("NCVAL", "NCVAL", "number", "NCVAL", "OH0_VLAM")
	self:oSchema:addProperty("NCACUM", "NCACUM", "number", "NCACUM", "OH0_VLACUM")
	self:oSchema:addProperty("POVAL", "POVAL", "number", "POVAL", "OH0_VLAM")
	self:oSchema:addProperty("POACUM", "POACUM", "number", "POACUM", "OH0_VLACUM")
	self:oSchema:addProperty("HRVAL", "HRVAL", "number", "HRVAL", "OH0_VLAM")
	self:oSchema:addProperty("HRACUM", "HRACUM", "number", "HRACUM", "OH0_VLACUM")
	self:oSchema:addProperty("PRVAL", "PRVAL", "number", "PRVAL", "OH0_VLAM")
	self:oSchema:addProperty("PRACUM", "PRACUM", "number", "PRACUM", "OH0_VLACUM")
	self:oSchema:addProperty("MoedaNac", "MoedaNac", "string", "MoedaNac", "OH0_TIPO")
	self:oSchema:addProperty("SimbNac", "SimbNac", "string", "SimbNac", "CTO_SIMB")

Return self:oSchema
