#include 'totvs.ch'

/*/{Protheus.doc} OFSoResponseBody
    Classe que representa o corpo da resposta do SO JD
    
    @type class
    @author Vinicius Gati
    @since 01/07/2021
/*/
Class OFSoResponseBody
    Public Data oRequest
    Public Data jData
	Public Data nCode
    Public Method New()
    Public Method ToJson()
EndClass

/*/{Protheus.doc} New
    Construtor Simples

    @type method
    @author Vinicius Gati
    @since 01/07/2021
/*/
Method New(nCode, oRequest, jData) Class OFSoResponseBody
	::nCode := nCode
    ::oRequest := oRequest
    ::jData := jData
Return SELF

/*/{Protheus.doc} ToJson
    retorna o json no formato esperado nas respostas do SO JD

    @type method
    @author Vinicius Gati
    @since 01/07/2021
/*/
Method ToJson() Class OFSoResponseBody
    local jRet := JsonObject():New()
    jRet["name"] := self:oRequest:toJson()["name"]
	if valtype(self:jData) == 'J'
    	jRet["data"] := self:jData
	else
		jRet["data"] := self:jData:toJSON()
	endif
	jRet["code"] := self:nCode
Return jRet
