#INCLUDE 'protheus.ch'
#INCLUDE 'restful.ch'
#DEFINE _tgItems 'items'

//-------------------------------------------------------------------
/*/{Protheus.doc} PLProfessionalsEnt

@author  sakai
@version P12
@since   06/09/22
/*/
//------------------------------------------------------------------- 
class PLProfessionalsEnt from PLSEntAux

    public method new()
    public method geraProf(oDao,nX)
    public method montaEspecProf(oDao,nX, lBuscaCbs)

endClass

method new() class PLProfessionalsEnt
    _Super:New()
Return self


//-------------------------------------------------------------------
/*/{Protheus.doc} Metodos de montagem do json

@author  sakai
@version P12
@since   06/09/22
/*/
//------------------------------------------------------------------- 
method geraProf(oDao,nX,cAlias) class PLProfessionalsEnt

    Local cAli := oDao:getAliasTemp()
  
    if nX == 1
        self:oResult[_tgItems] := {}
    endIf

    aadd(self:oResult[_tgItems], JsonObject():new())
    self:oResult[_tgItems,nX,"name"]  := self:maskField( iif(cAlias == 'BB0',(cAli)->BB0_NOME,(cAli)->BC1_NOMPRF) )
    self:oResult[_tgItems,nX,"idOnHealthInsurer"] := self:maskField( (cAli)->BB0_CODIGO )
    self:oResult[_tgItems,nX,"phoneNumber"] := self:maskField( (cAli)->BB0_TEL )
    self:oResult[_tgItems,nX,"professionalCouncil"] := self:maskField( (cAli)->BB0_CODSIG )
    self:oResult[_tgItems,nX,"professionalIdentifier"] := self:maskField( (cAli)->BB0_CGC )
    self:oResult[_tgItems,nX,"professionalCouncilNumber"] := self:maskField( (cAli)->BB0_NUMCR )
    self:oResult[_tgItems,nX,"cbosCode"] := ''
    self:oResult[_tgItems,nX,"email"] := self:maskField( (cAli)->BB0_EMAIL )
    self:oResult[_tgItems,nX,"stateAbbreviation"] := self:maskField( (cAli)->BB0_ESTADO )

    /*
    self:oResult[_tgItems,nX,"name"]  := self:maskField( (cAli)->BB0_NOME )
    self:oResult[_tgItems,nX,"idOnHealthInsurer"] := self:maskField( (cAli)->BB0_CODIGO )
    self:oResult[_tgItems,nX,"phoneNumber"] := self:maskField( (cAli)->BB0_TEL )
    self:oResult[_tgItems,nX,"professionalCouncil"] := self:maskField( (cAli)->BB0_CODSIG )
    self:oResult[_tgItems,nX,"professionalIdentifier"] := self:maskField( (cAli)->BB0_CGC )
    self:oResult[_tgItems,nX,"professionalCouncilNumber"] := self:maskField( (cAli)->BB0_NUMCR )
    self:oResult[_tgItems,nX,"cbosCode"] := ''
    self:oResult[_tgItems,nX,"email"] := self:maskField( (cAli)->BB0_EMAIL )
    self:oResult[_tgItems,nX,"stateAbbreviation"] := self:maskField( (cAli)->BB0_ESTADO )
    */
    /*
           "_expandables": [
                "cbos"
            ],
            "cbos": {},
    */

return

method montaEspecProf(oDao,nX, lBuscaCbs) class PLProfessionalsEnt

    Local cAli := oDao:getAliasTemp()

    if nX == 1
        self:oResult[_tgItems] := {}
    endIf

    aadd(self:oResult[_tgItems], JsonObject():new())
    self:oResult[_tgItems,nX,"code"] := self:maskField( (cAli)->BTQ_CDTERM )
    self:oResult[_tgItems,nX,"description"] := self:maskField( (cAli)->BTQ_DESTER )
    if !lBuscaCbs
        self:oResult[_tgItems,nX,"specialtyDescription"] := self:maskField( (cAli)->BAQ_DESCRI )
        self:oResult[_tgItems,nX,"specialtyCode"] := self:maskField( (cAli)->BQ1_CODESP )
    endif

return
