#include "TOTVS.CH"

Class HealthApiProtocolCollection from CenCollection

    public method New() Constructor
    public method initEntity()
 	
    public method get()
    public method goTop()
    public method getNext()
    public method getCount()

EndClass

Method New() Class HealthApiProtocolCollection
    _Super:new()
    self:oMapper := HealthApiProtocolMapper():New()
    self:oDao := HealthApiProtocolDao():New(self:oMapper:getFields())
return self

Method initEntity() Class HealthApiProtocolCollection
return HealthApiProtocolEntity():New()

Method get(cCodRda,cAno,cMes,cLoteNF,cPegs,lHatJourney,cBatchNumber,cProtocol,cTipGui,cStatus,cDateFrom,cDateTo) Class HealthApiProtocolCollection
    self:lFound := self:getDao():get(cCodRda,cAno,cMes,cLoteNF,cPegs,lHatJourney,cBatchNumber,cProtocol,cTipGui,cStatus,cDateFrom,cDateTo)
    if self:lFound 
        self:goTop()
    endIf    
Return self:found()

Method goTop() Class HealthApiProtocolCollection
    self:nRecno := 1
    (self:getDao():getAliasTemp())->(DBGoTop())
return

Method getNext() Class HealthApiProtocolCollection
    self:oMapper:setEntity(self:initEntity())
    self:oMapper:mapFromDao(self:getDao())
    self:hMap := self:oMapper:getEntity():getHMap()
    self:setKeyRelation()
    self:nRecno++
    (self:getDao():getAliasTemp())->(DbSkip())
return self:oMapper:getEntity()

Method getCount() Class HealthApiProtocolCollection
return self:getDao():getCount()
