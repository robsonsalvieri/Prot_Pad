#include "tlpp-core.th"
#include "tlpp-rest.th"

namespace totvs.protheus.health.plan.api.procedures

/*/{Protheus.doc} ProceduresController
Classe controladora das APIs de procedimentos

@type class
@author vinicius.queiros
@since 13/10/2023
@version 12.1.2410
/*/
class ProcedureController

    private data oService as object

    public method new() constructor

    @GET("/totvsHealthPlans/procedure/v1/procedures/:procedureId")
    public method apiProcedureId()

endclass

/*/{Protheus.doc} new
Método construtor da classe

@type method
@author vinicius.queiros
@since 13/10/2023
@version 12.1.2410
/*/
method new() class ProcedureController
return self

/*/{Protheus.doc} apiProcedureId
Método responsável pela api que retorna os dados do procedimento na tabela padrão
Url: /totvsHealthPlans/procedure/v1/procedures/:procedureId
Verbo: GET

@type method
@author vinicius.queiros
@since 13/10/2023
@version 12.1.2410
/*/
method apiProcedureId() class ProcedureController

    local jPath := oRest:getPathParamsRequest() as json

    self:oService := ProcedureService():new()
    self:oService:setPathParams(jPath)

    if self:oService:getProcedureId()
        oRest:setResponse(self:oService:getJsonResult())
        oRest:setStatusCode(self:oService:getStatusCode())
    else
        oRest:setFault(self:oService:getJsonResult())
        oRest:setStatusCode(self:oService:getStatusCode())
    endIf

    oRest:setKeyHeaderResponse("Content-Type", "application/json")

return
