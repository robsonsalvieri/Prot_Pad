#include "PLSMGER.CH"
#include "PROTHEUS.CH"     
/*/


Ŀ
Funcao     PLSA106  Autor  Geraldo Felix Junior    Data  31.03.00 
Ĵ
Descricao  Tabela de Precos                                           
Ĵ
Sintaxe    PLSA106()                                                  
Ĵ
 Uso       Advanced Protheus                                          
Ĵ
 Alteracoes desde sua construcao inicial.                              
Ĵ
 Data      BOPS  Programador  Breve Descricao                       
Ĵ


/*/
Function PLSA991

//Ŀ
// Define o cabecalho da tela de atualizacoes                               
//
Private aRotina := MenuDef()

Private cCadastro := Fundesc() //"Diferenciao de Filme por Produtos"

//Ŀ
// Endereca a funcao de BROWSE                                              
//
DbSelectarea("BF5")
DbSetOrder(1)
MsSeek(xFilial("BF5"))
BF5->(mBrowse(06,01,22,75,"BF5"))

//Ŀ
// Fim da Rotina Principal                                                  
//
Return(NIL)

/*/


Ŀ
Funcao     PL106MOV  Autor  Tulio Cesar            Data  31.03.00 
Ĵ
Descricao  Movimentacao da Tabela de Precos.                          
ٱ


/*/
Function PL991MOV(cAlias,nReg,nOpc)
Local I__f := 0
//Ŀ
// Define Variaveis...                                                      
//
Local nOpca	:= 0
Local oDlg
Local oEnchoice
Local aTELA[0][0]
Local aGETS[0]
Local aPosObj   := {}
Local aObjects  := {}
Local aSize     := {}
Local aInfo     := {}

If nOpc == K_Incluir
	Copy "BF5" TO Memory Blank
Else
	Copy "BF5" TO MEMORY
Endif                   

//Ŀ
// Define Dialogo...                               ADMIN                         
//
aSize := MsAdvSize()
aObjects := {}       
AAdd( aObjects, { 1, 1, .T., .T., .F. } )
aInfo := { aSize[ 1 ], aSize[ 2 ], aSize[ 3 ], aSize[ 4 ], 3, 3 }
aPosObj := MsObjSize( aInfo, aObjects, .T., .F. )	
DEFINE MSDIALOG oDlg TITLE cCadastro FROM aSize[7],0 TO aSize[6],aSize[5] OF GetWndDefault() Pixel
	//Ŀ
	// Monta Enchoice...                                                        
	//
	Zero()
	oEnchoice := MsMGet():New(cAlias,nReg,nOpc,,,,,aPosObj[1],,,,,,oDlg,,,.F.)
	
ACTIVATE MSDIALOG oDlg ON INIT Eval({ || EnchoiceBar(oDlg,{|| nOpca := 1,Iif(Obrigatorio(oEnchoice:aGets,oEnchoice:aTela) .and. ValDtBF5(nOpc),oDlg:End(),nOpca:=2),If(nOpca==1,oDlg:End(),.F.) },{||oDlg:End()},.F.,{})  }) Center

//Ŀ
// Rotina de gravacao dos dados...                                          
//
If  nOpca == K_OK

	PLUPTENC("BF5",nOpc)

Endif

//Ŀ
// Fim da Rotina...                                                         
//
Return(NIL)
/*


Ŀ
Programa  ValDtBC5     Autor  Tulio Cesar        Data  25.06.2002 
Ĵ
Descrio  Valida data na digitacao da tabela de preco				  
ٱ


*/
Static Function ValDtBF5(nOpc)

Local cSql      := ""
Local aArea 	:= GetArea()
Local lRet		:= .T.

If nOpc <> K_Excluir
	lRet := PLSVLDVIG("BF5",nOpc,NIL,"BF5_VIGDE","BF5_VIGATE",{1,(xFilial("BF5")+M->BF5_CODINT+M->BF5_CODPRO),"BF5_FILIAL+BF5_CODINT+BF5_CODPRO"})	
EndIf

// Restaura area.
RestArea(aArea)
	
Return(lRet)



/*/


Ŀ
Programa  MenuDef    Autor  Darcio R. Sporl        Data 26/12/2006
Ĵ
Descrio  Utilizacao de menu Funcional                               
                                                                      
                                                                      
Ĵ
Retorno   Array com opcoes da rotina.                                 
Ĵ
ParametrosParametros do array a Rotina:                               
          1. Nome a aparecer no cabecalho                             
          2. Nome da Rotina associada                                 
          3. Reservado                                                
          4. Tipo de Transao a ser efetuada:                        
          		1 - Pesquisa e Posiciona em um Banco de Dados           
              2 - Simplesmente Mostra os Campos                       
              3 - Inclui registros no Bancos de Dados                 
              4 - Altera o registro corrente                          
              5 - Remove o registro corrente do Banco de Dados        
          5. Nivel de acesso                                          
          6. Habilita Menu Funcional                                  
Ĵ
   DATA    Programador   Manutencao efetuada                         
Ĵ
                                                                     
ٱ


/*/
Static Function MenuDef()
Private aRotina := {	{ 'Pesquisar', 'AxPesqui' , 0 , K_Pesquisar  , 0, .F.},; //		1
											{ 'Visualizar', 'PL991MOV' , 0 , K_Visualizar , 0, Nil},; //    2
											{ 'Incluir', 'PL991MOV' , 0 , K_Incluir    , 0, Nil},; //       3
											{ 'Alterar', 'PL991MOV' , 0 , K_Alterar    , 0, Nil},; //       4
											{ 'Excluir', 'PL991MOV' , 0 , K_Excluir    , 0, Nil}} //       5
Return(aRotina)

/*
Function PLSA991
Local cSql := ""

AxCadastro("BF5",, , , , ,{ || PLSVLDVIG("BF5") }) 

Return             
*/


/*


ͻ
Programa  PLSA991   Autor  Microsiga            Data   08/19/10   
͹
Desc.                                                                 
                                                                      
͹
Uso        AP                                                        
ͼ


*/
Function PLSA991CD()
LOCAL cRet := PLSA625Cd("BF5_SEQFIL","BF5",1,"BF5->(BF5_CODINT+BF5_CODPRO)",M->BF5_CODINT+M->BF5_CODPRO)

Return(cRet)