#INCLUDE "PROTHEUS.CH"
#INCLUDE "FWLIBVERSION.CH"
#include "totvs.ch"
#include "msobject.ch"
#include "totvs.framework.treports.integratedprovider.th"
#include "tlpp-rest.th"
#include "tlpp-core.th"

namespace totvs.protheus.backoffice.sv.fat.salesstatisticsbypaymentterm.treportsintegratedprovider

@totvsFrameworkTReportsIntegratedProvider(active=.F., team="SIGAFAT", tables="SE1,SD1,SD2,SF2", name="Estatística de Venda por Prazo de Pagamento", country="BRA")

//-----------------------------------------------------------------------------------
/*/{Protheus.doc} salesstatisticsbypaymenttermSmartViewBusinessObjectBRA
Classe para criação do Objeto de Negócio para Relacao Estatística de Venda por 
Prazo de Pagamento Brasil.

@author FAT/CRM
@since 24/07/2023
@version 1.0
*/
//-----------------------------------------------------------------------------------  
class salesstatisticsbypaymenttermSmartViewBusinessObjectBRA from totvs.protheus.backoffice.sv.fat.salesstatisticsbypaymentterm.treportsintegratedprovider.salesstatisticsbypaymenttermSmartViewBusinessObject
    
    public method new() as object
    public method preData() as object
    public method processData() as object
    public method preSchema() as object

endclass
 
//-------------------------------------------------------------------
/*{Protheus.doc} new
Método de instância da classe
 
@return object: self
 
@author FAT/CRM
@since 24/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method new() class salesstatisticsbypaymenttermSmartViewBusinessObjectBRA
	
    _Super:new()

return self

//-------------------------------------------------------------------
/*{Protheus.doc} preData
Método chamado antes do getData do objeto principal
 
@return object: self:oData
 
@author FAT/CRM
@since 24/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preData() as object class salesstatisticsbypaymenttermSmartViewBusinessObjectBRA 
	
    //Aqui é adicionada uma condição no where que será utilizado na query do objeto padrão

Return self:oData

//-------------------------------------------------------------------
/*{Protheus.doc} processData
Deverá ser chamado no momento do processamento da query
 
@return object: self:oData
 
@author FAT/CRM
@since 24/07/2023
@version 1.0
*/
//-------------------------------------------------------------------    
method processData(nOperLoc as numeric) as object class salesstatisticsbypaymenttermSmartViewBusinessObjectBRA

    Local aArea := GetArea() as array 

    Do Case
        //-----------------------------------------------------------
        //Operação 1 será utilizado somente para commit dos 
        //campos antes do appendData 
        //Case (nOperLoc == 1)
        //-----------------------------------------------------------
        Case nOperLoc == 1

        //-----------------------------------------------------------
        //Valida se Registro do Alias pode ser considerado na listagem
        //-----------------------------------------------------------
        Case nOperLoc == 2

            self:lRemito := IsRemito( 1, self:cCpoRemito )
        
        //-----------------------------------------------------------
        //Considera a devolucao de IPI (Brasil)
        //-----------------------------------------------------------
        Case nOperLoc == 3
            self:nDevolIPILoc := (self:cAliasTmpSD2Loc)->D1_VALIPI
    EndCase

    RestArea(aArea)
	aSize(aArea, 0)

return

//-------------------------------------------------------------------
/*{Protheus.doc} preSchema
Método chamada antes do getSchema do objeto principal
 
@return object: self:oSchema
 
@author FAT/CRM
@since 24/07/2023
@version 1.0
*/
//-------------------------------------------------------------------   
method preSchema() as object class salesstatisticsbypaymenttermSmartViewBusinessObjectBRA

    //Adição de novos campos personalizados (não existem na tabela)

return self:oSchema
