#INCLUDE "INKEY.CH"
#INCLUDE "PROTHEUS.CH"
#INCLUDE "GPEM010.CH"

/*/


Ŀ
Funo     GPEM010   Autor  Mauro                    			  Data  16/03/95  
Ĵ
Descrio  Calculo do Adiantamento Quinzenal                              			
Ĵ
         ATUALIZACOES SOFRIDAS DESDE A CONSTRUAO INICIAL.   		                
Ĵ
Programador  Data    FNC              Motivo da Alteracao                         
Ĵ
Leandro Dr. 11/01/13M12RH01  	 	 Unificao da Folha. Projeto Versao 12.         
                    RHU210_04_01                                                  
ٱ

*/
Function gpem010()

//--Chamada do programa de Calculo. 
GPEM020("ADI") 

Return Nil

/*/


Ŀ
Funo    Firmultvad Autor  Mauro                  Data  03.03.95 
Ĵ
Descrio  Calcula as Verbas do Adiantamento                          
Ĵ
Sintaxe e  Firmultvad()                                               
                                                                      
Ĵ
Parametros                                                            
Ĵ
 Uso       Generico                                                   
ٱ

*/
Function Firmultvad()

Local nPos	:= 0

//Ŀ
// Seta a variavel calcule para "S" para sempre fazer o ADI	 
//
Calcule := "S"

//Ŀ
// Pesquisa o adiantamento total pago.							 
//
If (nPos := Ascan ( aPD , { |X| X[1] == aCodFol[7,1] .And. X[3] == SEMANA .And. X[9] # "D" } ) ) > 0
	BASE_INI	:= aPd[nPos,5]
	Val_Adto	:= aPd[nPos,5]
endif

return
          
/*/


Ŀ
Funo    FFolSemana Autor  MR                     Data  22.11.12 
Ĵ
Descrio  Prepara parametro 08 para funcoes internas 				  
Ĵ
Sintaxe    FFolSemana()												  
                                                                      
Ĵ
 Uso       GPEM010                                                    
ٱ

*/
Static Function FFolSemana()
Local xRet   	

IF Type("lGrid") == "U"
	lGrid:=.F.
EndIf
     
IF Type("cRoteiro") == "U"
   cRoteiro	:= 'FOL'
EndIf

If lGrid
	//Ŀ
	// Carregando parametro 08 									 
	//
	If cRoteiro == "FOL"

		xRet 	:=	mv_par08					//	Semana a Ser Calculada

	ElseIf cRoteiro = "ADI"

		xRet 	:= 	mv_par08    				//  nTipCal  := Calcular os Informados, Calculado ou Todos
	EndIf
EndIf
Return(xRet)
