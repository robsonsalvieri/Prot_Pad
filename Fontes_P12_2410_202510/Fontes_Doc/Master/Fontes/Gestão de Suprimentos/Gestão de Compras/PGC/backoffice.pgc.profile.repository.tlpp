#include 'tlpp-core.th'
#include 'tlpp-rest.th'

namespace pgc.profileRepository

/*/{Protheus.doc} pgcProfileRepository
	Classe repositório de perfil do usuário
@author juan.felipe
@since 29/12/2021
/*/
Class pgcProfileRepository
    public Method New()

    public Method postProfile()
    public Method putProfile()
    public Method getHaveProfile()
EndClass

/*/{Protheus.doc} New
	Método construtor
@author juan.felipe
@since 29/12/2021
/*/
Method New() Class pgcProfileRepository
Return Self

/*/{Protheus.doc} postProfile
	Consulta profile do usuário existente no banco.
@author juan.felipe
@since 30/12/2021
@param cUserId, character, código do usuário.
@param cCompany, character, empresa.
@param cBranch, character, filial.
@return lWrite, logical, profile gravado com sucesso.
/*/
Method getHaveProfile(cUserId, cCompany, cBranch) Class pgcProfileRepository
    Local cContent As Character

    cContent := ""

    If FindProfDef(cUserId, 'PGCA010', 'CONFIG', 'CFG_PRO',,, cCompany, cBranch)
        cContent := RetProfDef(cUserId, 'PGCA010', 'CONFIG', 'CFG_PRO',' ', .F., cCompany, cBranch)
    Endif

Return cContent

/*/{Protheus.doc} postProfile
	Grava profile do usuário
@author juan.felipe
@since 30/12/2021
@param cUserId, character, código do usuário.
@param cBody, character, conteúdo a ser gravado no profile.
@param cCompany, character, empresa.
@param cBranch, character, filial.
@return lWrite, logical, profile gravado com sucesso.
/*/
Method postProfile(cUserId, cBody, cCompany, cBranch) Class pgcProfileRepository
    Local lWrite As Logical

    lWrite := WriteNewProf(cUserId, 'PGCA010', 'CONFIG', 'CFG_PRO',cBody, ,cCompany, cBranch)
Return lWrite

/*/{Protheus.doc} putProfile
	Altera profile do usuário
@author juan.felipe
@since 30/12/2021
@param cUserId, character, código do usuário.
@param cBody, character, conteúdo a ser gravado no profile.
@param cCompany, character, empresa.
@param cBranch, character, filial.
@return lWrite, logical, profile gravado com sucesso.
/*/
Method putProfile(cUserId, cBody, cCompany, cBranch) Class pgcProfileRepository
    Local lWrite As Logical

    lWrite := WriteProfDef(cUserId, 'PGCA010', 'CONFIG', 'CFG_PRO', cUserId, 'PGCA010', 'CONFIG', 'CFG_PRO', cBody, ,cCompany, cBranch )
Return lWrite
