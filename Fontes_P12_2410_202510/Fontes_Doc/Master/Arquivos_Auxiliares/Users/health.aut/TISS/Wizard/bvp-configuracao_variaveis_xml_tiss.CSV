BVP_TISVER;BVP_NOMVAR;BVP_VLREXP;BVP_ALIAS;BVP_INDICE;BVP_DADSEK;BVP_ORDEM
4.01.00;COPEMOV;PLSINTPAD();;0;;001
4.01.00;CARQXML;CFILEXML;;0;;002
4.01.00;CFILESEQ;SUBSTR(SUBSTR(CFILEXML,RAT(PLSMUDSIS('\'),CFILEXML)+1,LEN(CFILEXML)),1,RAT('_',CFILEXML)-RAT(PLSMUDSIS('\'),CFILEXML)-1);;0;;003
4.01.00;CFILEDEL;SUBSTR(SUBSTR(CFILEXML,RAT(PLSMUDSIS('\'),CFILEXML)+1,LEN(CFILEXML)),RAT('_',CFILEXML)-RAT(PLSMUDSIS('\'),CFILEXML),1);;0;;004
4.01.00;CFILEHAS;UPPER(ALLTRIM( SUBSTR(SUBSTR(CFILEXML,RAT(PLSMUDSIS('\'),CFILEXML)+1,LEN(CFILEXML)),RAT('_',CFILEXML)-RAT(PLSMUDSIS('\'),CFILEXML)+1,RAT('.',CFILEXML)-RAT('_',CFILEXML)-1) ) );;0;;005
4.01.00;CTPGUIAS;Iif(Findfunction("P973TpGui"),P973TpGui(),'GUIASP_SADT,GUIARESUMOINTERNACAO,GUIAHONORARIOINDIVIDUAL,GUIAHONORARIOS,GUIACONSULTA,GUIAODONTO,SOLICITACAOSP-SADT,SOLICITACAOINTERNACAO,SOLICITACAOPRORROGACAO,SOLICITACAOODONTOLOGIA');;0;;006
4.01.00;CGUIA;PLSTPGUIA(CTPGUIAS, ADADOSUNIC);;0;;007
4.01.00;CTIPO;IIF('CONSULTA' $ CGUIA,'1',IIF('SADT' $ CGUIA,'2',IIF('INTERNACAO' $ CGUIA,'3', IIF('HONORARIO' $ CGUIA,'3','4') )));;0;;008
4.01.00;CORIGGU;'1';;0;;009
4.01.00;CTIPGUI;IIF('CONSULTA' $ CGUIA,'01',IIF('SADT' $ CGUIA,'02',IIF('INTERNACAO' $ CGUIA,'05', IIF('HONORARIO' $ CGUIA,'06','07') )));;0;;010
4.01.00;CRDAORI;PLAJUSTRDA(PVLRTAGXML(ADADOSUNIC, '[%\ORIGEM\IDENTIFICACAOPRESTADOR\CNPJ,\ORIGEM\IDENTIFICACAOPRESTADOR\CPF,\ORIGEM\IDENTIFICACAOPRESTADOR\CODIGOPRESTADORNAOPERADORA%]'));;0;;011
4.01.00;CTPTRAN;[%\mensagemTISS\cabecalho\identificacaoTransacao\tipoTransacao%];;0;;012
4.01.00;CSEQTRAN;[%\mensagemTISS\cabecalho\identificacaoTransacao\sequencialTransacao%];;0;;013
4.01.00;CSLVOPE;BA0->(BA0_CODIDE+BA0_CODINT);BA0;5;XFILIAL('BA0')+ [%\MENSAGEMTISS\CABECALHO\DESTINO\REGISTROANS%];014
4.01.00;CMATRIC;IiF(Findfunction("PlMatValida"), PlMatValida([%\NUMEROCARTEIRA%],[%\NOMEBENEFICIARIO%],PLSAJUDAT(PVLRTAGXML(ADADOSUNIC,'[%GUIACONSULTA\DADOSATENDIMENTO\DATAATENDIMENTO,\DATAEXECUCAO,\DATAREALIZACAO,\GUIAHONORARIOS\PROCEDIMENTOSREALIZADOS\PROCEDIMENTOREALIZADO\DATAEXECUCAO%]') )), [%\NUMEROCARTEIRA%]);;0;;015
4.01.00;CNOMEUSU;strTran(StrTran([%\NOMEBENEFICIARIO%], chr(34), chr(32)), chr(39), chr(32));;0;;016
4.01.00;CGUIPRI;[%\GUIAPRINCIPAL%];;0;;017
4.01.00;CNUMIMP;[%\NUMEROGUIAPRESTADOR%];;0;;018
4.01.00;CNUMIMPOP;[%\NUMEROGUIAOPERADORA%];;0;;019
4.01.00;CNUMSEN;[%\SENHA%];;0;;020
4.01.00;CCODRP;PLSEXECDAD();;0;;021
4.01.00;NIDX;IIF (LEN(CCODRP) == 11 .OR. LEN(CCODRP) == 14, 4, 1);;0;;022
4.01.00;NIDXP;IIF (LEN(CRDAORI) == 11 .OR. LEN(CRDAORI) == 14, 4, 1);;0;;023
4.01.00;CSLVPAD;[%\CODIGOTABELA%];;0;;024
4.01.00;CSLVPRO;Iif(ValType([%\CODIGOPROCEDIMENTO%]) <> 'C', '',[%\CODIGOPROCEDIMENTO%]);;0;;025
4.01.00;CCODPAD;PADR(PLSVARVINC('87', 'BR4', [%\CODIGOTABELA%]), 2);;0;;026
4.01.00;CCODPRO;PADR(PLSVARVINC([%\CODIGOTABELA%] , 'BR8', Iif(ValType([%\CODIGOPROCEDIMENTO%]) <> 'C', '',[%\CODIGOPROCEDIMENTO%]),CCODPAD+CSLVPRO,'\CODIGOPROCEDIMENTO',ATABDUP,@CCODPAD), 16);;0;;027
4.01.00;CTPPROC;'';;0;;028
4.01.00;NQTDPRO;IIF(ISDIGIT([%\QUANTIDADEEXECUTADA%]), VAL([%\QUANTIDADEEXECUTADA%]), IIF(ISDIGIT([%\QTDPROC%]), VAL([%\QTDPROC%]), 0));;0;;029
4.01.00;CCODUF;If(!Empty([%\UF%]),PADR(PLSVARVINC('59', NIL, [%\UF%]), 2),'');;0;;030
4.01.00;CDATA;PLSAJUDAT(PVLRTAGXML(ADADOSUNIC, '[%GUIACONSULTA\DADOSATENDIMENTO\DATAATENDIMENTO,\PROCEDIMENTOEXECUTADO\DATAEXECUCAO,\PROCEDIMENTOREALIZADO\DATAEXECUCAO,\PROCEDIMENTOSEXECUTADOS\DATAREALIZACAO,\SERVICOSEXECUTADOS\DATAEXECUCAO%]'));;0;;031
4.01.00;DDATPRO;PLSAJUDAT(PVLRTAGXML(ADADOSUNIC,'[%GUIACONSULTA\DADOSATENDIMENTO\DATAATENDIMENTO,\DATAEXECUCAO,\DATAREALIZACAO,\GUIAHONORARIOS\PROCEDIMENTOSREALIZADOS\PROCEDIMENTOREALIZADO\DATAEXECUCAO%]') );;0;;032
4.01.00;CCODLOC;PL973RETLOC(CCODRP,COPEMOV,'[%\CNES,\CNESEXEC%]');;0;;033
4.01.00;CLOCAL;BB8->BB8_CODLOC;BB8;1;XFILIAL('BB8')+CCODRP;034
4.01.00;ARETFUN;PLSDADUSR(CMATRIC,'1',.F.,DDATPRO);;0;;035
4.01.00;ADADUSR;PLSGETUSR();;0;;036
4.01.00;CCODPLA;IIF(LEN(ADADUSR)>=11,ADADUSR[11],'');;0;;037
4.01.00;ARETPP;PLSVLDCON(CMATRIC,PLSAJUDAT(PVLRTAGXML(ADADOSUNIC,'[%GUIACONSULTA\DADOSATENDIMENTO\DATAATENDIMENTO,\DATAEXECUCAO,\GUIAHONORARIOS\PROCEDIMENTOSREALIZADOS\PROCEDIMENTOREALIZADO\DATAEXECUCAO,\PROCEDIMENTOSEXECUTADOS\DATAREALIZACAO%]') ),NIL,NIL,'1',NIL,NIL,CRDAORI,NIL,.F.);;0;;038
4.01.00;AITELIB;_PRETAULI(CNUMSEN);;0;;039
4.01.00;CCODSIGLA;PVLRTAGXML(ADADOSUNIC, '[%\CONSELHO,\CONSELHOPROFISSIONAL%]');;0;;040
4.01.00;CCRM;[%\NUMEROCONSELHOPROFISSIONAL%];;0;;041
4.01.00;DDATAPRCRE;PLSAJUDAT(PVLRTAGXML(ADADOSUNIC, '[%\PROCEDIMENTOEXECUTADO\DATAEXECUCAO,\PROCEDIMENTOREALIZADO\DATAEXECUCAO,\PROCEDIMENTOSEXECUTADOS\DATAREALIZACAO,\DATAATENDIMENTO%]'));;0;;042
4.01.00;NRECBE2;0;;0;;043
4.01.00;NRECNOAUT;0;;0;;044
4.01.00;CSIGLA;PlBCodSi(PVLRTAGXML(ADADOSUNIC, '[%\CONSELHO,\CONSELHOPROFISSIONAL%]'));;0;;045
4.01.00;LFOUNDAUT;.F.;;0;;046
4.01.00;CHORA;IIF(CTIPO $ '234', [%PROCEDIMENTOSEXECUTADOS\PROCEDIMENTOEXECUTADO\HORAINICIAL%], '');;0;;047
4.01.00;NVALTOTG;0;;0;;048
4.01.00;CNOMEPRO;[%\EQUIPESADT\NOMEPROF%];;0;;049
4.01.00;CGRAUPAR;PVLRTAGXML(ADADOSUNIC, '[%\GRAUPART,\GRAUPARTICIPACAO%]');;0;;050
4.01.00;CVALUNIT;IIF( CTIPGUI == '01', [%\VALORPROCEDIMENTO%] , [%\VALORUNITARIO%]);;0;;051
4.01.00;ACLASPROC;PLCLASERI('2');;0;;052
4.01.00;NVALTOT;[%\VALORTOTAL%];;0;;053
4.01.00;CREDACR;IIF(Val([%\REDUCAOACRESCIMO%]) >= 100, AllTrim(Str(Val([%\REDUCAOACRESCIMO%])/100)), [%\REDUCAOACRESCIMO%]);;0;;054
4.01.00;ARETRDA;PLSDADRDA(COPEMOV,CRDAORI,'1',DDATPRO);;0;;055
4.01.00;ADADRDA;PLSGETRDA();;0;;056
4.01.00;_LPLSCTES;GetNewPar('MV_PLSCTES','0') == '1';;0;;057
4.01.00;_CCBOSOL;PlCarCBOVar('1',ADADOSUNIC,,[%\PROFISSIONALSOLICITANTE\CBOS%]);;0;;058
4.01.00;_CCBOEXE;PlCarCBOVar('2',ADADOSUNIC,,[%\CBOS%],[%\CBO%]);;0;;059
4.01.00;_CESPSOL;PlCarCBOVar('3',ADADOSUNIC,,[%\PROFISSIONALSOLICITANTE\CBOS%]);;0;;060
4.01.00;_CESPEXE;PlCarCBOVar('4',ADADOSUNIC,,[%\CBOS%],[%\CBO%]);;0;;061
4.01.00;_CCODESP;PlCarCBOVar('5',ADADOSUNIC,,[%\CBOS%]);;0;;062
4.01.00;ACODTAB;PLSRETTAB(CCODPAD,PLSASPAS(CCODPRO),DDATPRO, COPEMOV,CRDAORI,_CCODESP,'',CCODLOC+CLOCAL,DDATPRO,'1',COPEMOV,CCODPLA,'2','1');;0;;063
4.01.00;ACOMPO;PLSCOMEVE(,PNewTabDup(aTabDup, 'BR8', PADR(PLSVARVINC([%\CODIGOTABELA%] , 'BR8', [%\CODIGOPROCEDIMENTO%],CCODPAD+CSLVPRO,'\CODIGOPROCEDIMENTO',ATABDUP,@CCODPAD), 16), [%\CODIGOTABELA%]),PADR(PLSVARVINC([%\CODIGOTABELA%] , 'BR8', [%\CODIGOPROCEDIMENTO%],CCODPAD+CSLVPRO,'\CODIGOPROCEDIMENTO',ATABDUP,@CCODPAD), 16),COPEMOV,DDATPRO);;0;;064
4.01.00;CNVCRIXML;'';;0;;065
4.01.00;CCOMPCRI;'';;0;;066
4.01.00;LPLHAT;.F.;;0;;067
4.01.00;DFATINI;PLSAJUDAT(PVLRTAGXML(ADADOSUNIC,'[%\GUIARESUMOINTERNACAO\DADOSINTERNACAO\DATAINICIOFATURAMENTO, \DATAINICIOFATURAMENTO%]') );;0;;068
4.01.00;DFATFIM;PLSAJUDAT(PVLRTAGXML(ADADOSUNIC,'[%\GUIARESUMOINTERNACAO\DADOSINTERNACAO\DATAFINALFATURAMENTO, \DATAFINALFATURAMENTO%]') );;0;;069
4.01.00;CHORFIN;IIF(CTIPO $ '234', [%PROCEDIMENTOSEXECUTADOS\PROCEDIMENTOEXECUTADO\HORAFINAL%], '');;0;;070